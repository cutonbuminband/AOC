<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>AOC - 2015 Solutions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../qmd/styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/2015.html">2015 Solutions</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">AOC</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2024.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2024 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2023.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2023 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2022.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2022 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2021.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2021 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2020.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2020 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2019.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2019 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2018.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2018 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2017.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2017 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2016.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2016 Solutions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/2015.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2015 Solutions</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#imports" id="toc-imports" class="nav-link active" data-scroll-target="#imports">Imports</a></li>
  <li><a href="#day-1-not-quite-lisp" id="toc-day-1-not-quite-lisp" class="nav-link" data-scroll-target="#day-1-not-quite-lisp">Day 1: Not Quite Lisp</a>
  <ul class="collapse">
  <li><a href="#part-1" id="toc-part-1" class="nav-link" data-scroll-target="#part-1">Part 1</a></li>
  <li><a href="#part-2" id="toc-part-2" class="nav-link" data-scroll-target="#part-2">Part 2</a></li>
  </ul></li>
  <li><a href="#day-2-i-was-told-there-would-be-no-math" id="toc-day-2-i-was-told-there-would-be-no-math" class="nav-link" data-scroll-target="#day-2-i-was-told-there-would-be-no-math">Day 2: I Was Told There Would Be No Math</a>
  <ul class="collapse">
  <li><a href="#part-1-1" id="toc-part-1-1" class="nav-link" data-scroll-target="#part-1-1">Part 1</a></li>
  <li><a href="#part-2-1" id="toc-part-2-1" class="nav-link" data-scroll-target="#part-2-1">Part 2</a></li>
  </ul></li>
  <li><a href="#day-3-perfectly-spherical-houses-in-a-vacuum" id="toc-day-3-perfectly-spherical-houses-in-a-vacuum" class="nav-link" data-scroll-target="#day-3-perfectly-spherical-houses-in-a-vacuum">Day 3: Perfectly Spherical Houses in a Vacuum</a>
  <ul class="collapse">
  <li><a href="#part-1-2" id="toc-part-1-2" class="nav-link" data-scroll-target="#part-1-2">Part 1</a></li>
  <li><a href="#part-2-2" id="toc-part-2-2" class="nav-link" data-scroll-target="#part-2-2">Part 2</a></li>
  </ul></li>
  <li><a href="#day-4-the-ideal-stocking-stuffer" id="toc-day-4-the-ideal-stocking-stuffer" class="nav-link" data-scroll-target="#day-4-the-ideal-stocking-stuffer">Day 4: The Ideal Stocking Stuffer</a>
  <ul class="collapse">
  <li><a href="#part-1-3" id="toc-part-1-3" class="nav-link" data-scroll-target="#part-1-3">Part 1</a></li>
  <li><a href="#part-2-3" id="toc-part-2-3" class="nav-link" data-scroll-target="#part-2-3">Part 2</a></li>
  </ul></li>
  <li><a href="#day-5-doesnt-he-have-intern-elves-for-this" id="toc-day-5-doesnt-he-have-intern-elves-for-this" class="nav-link" data-scroll-target="#day-5-doesnt-he-have-intern-elves-for-this">Day 5: Doesn’t He Have Intern-Elves For This?</a>
  <ul class="collapse">
  <li><a href="#part-1-4" id="toc-part-1-4" class="nav-link" data-scroll-target="#part-1-4">Part 1</a></li>
  <li><a href="#part-2-4" id="toc-part-2-4" class="nav-link" data-scroll-target="#part-2-4">Part 2</a></li>
  </ul></li>
  <li><a href="#day-6-probably-a-fire-hazard" id="toc-day-6-probably-a-fire-hazard" class="nav-link" data-scroll-target="#day-6-probably-a-fire-hazard">Day 6: Probably a Fire Hazard</a>
  <ul class="collapse">
  <li><a href="#part-1-5" id="toc-part-1-5" class="nav-link" data-scroll-target="#part-1-5">Part 1</a></li>
  <li><a href="#part-2-5" id="toc-part-2-5" class="nav-link" data-scroll-target="#part-2-5">Part 2</a></li>
  </ul></li>
  <li><a href="#day-7-some-assembly-required" id="toc-day-7-some-assembly-required" class="nav-link" data-scroll-target="#day-7-some-assembly-required">Day 7: Some Assembly Required</a>
  <ul class="collapse">
  <li><a href="#part-1-6" id="toc-part-1-6" class="nav-link" data-scroll-target="#part-1-6">Part 1</a></li>
  <li><a href="#part-2-6" id="toc-part-2-6" class="nav-link" data-scroll-target="#part-2-6">Part 2</a></li>
  </ul></li>
  <li><a href="#day-8-matchsticks" id="toc-day-8-matchsticks" class="nav-link" data-scroll-target="#day-8-matchsticks">Day 8: Matchsticks</a>
  <ul class="collapse">
  <li><a href="#part-1-7" id="toc-part-1-7" class="nav-link" data-scroll-target="#part-1-7">Part 1</a></li>
  <li><a href="#part-2-7" id="toc-part-2-7" class="nav-link" data-scroll-target="#part-2-7">Part 2</a></li>
  </ul></li>
  <li><a href="#day-9-all-in-a-single-night" id="toc-day-9-all-in-a-single-night" class="nav-link" data-scroll-target="#day-9-all-in-a-single-night">Day 9: All in a Single Night</a>
  <ul class="collapse">
  <li><a href="#part-1-8" id="toc-part-1-8" class="nav-link" data-scroll-target="#part-1-8">Part 1</a></li>
  <li><a href="#part-2-8" id="toc-part-2-8" class="nav-link" data-scroll-target="#part-2-8">Part 2</a></li>
  </ul></li>
  <li><a href="#day-10-elves-look-elves-say" id="toc-day-10-elves-look-elves-say" class="nav-link" data-scroll-target="#day-10-elves-look-elves-say">Day 10: Elves Look, Elves Say</a>
  <ul class="collapse">
  <li><a href="#part-1-9" id="toc-part-1-9" class="nav-link" data-scroll-target="#part-1-9">Part 1</a></li>
  <li><a href="#part-2-9" id="toc-part-2-9" class="nav-link" data-scroll-target="#part-2-9">Part 2</a></li>
  </ul></li>
  <li><a href="#day-11-corporate-policy" id="toc-day-11-corporate-policy" class="nav-link" data-scroll-target="#day-11-corporate-policy">Day 11: Corporate Policy</a>
  <ul class="collapse">
  <li><a href="#part-1-10" id="toc-part-1-10" class="nav-link" data-scroll-target="#part-1-10">Part 1</a></li>
  <li><a href="#part-2-10" id="toc-part-2-10" class="nav-link" data-scroll-target="#part-2-10">Part 2</a></li>
  </ul></li>
  <li><a href="#day-12-jsabacusframework.io" id="toc-day-12-jsabacusframework.io" class="nav-link" data-scroll-target="#day-12-jsabacusframework.io">Day 12: JSAbacusFramework.io</a>
  <ul class="collapse">
  <li><a href="#part-1-11" id="toc-part-1-11" class="nav-link" data-scroll-target="#part-1-11">Part 1</a></li>
  <li><a href="#part-2-11" id="toc-part-2-11" class="nav-link" data-scroll-target="#part-2-11">Part 2</a></li>
  </ul></li>
  <li><a href="#day-13-knights-of-the-dinner-table" id="toc-day-13-knights-of-the-dinner-table" class="nav-link" data-scroll-target="#day-13-knights-of-the-dinner-table">Day 13: Knights of the Dinner Table</a>
  <ul class="collapse">
  <li><a href="#part-1-12" id="toc-part-1-12" class="nav-link" data-scroll-target="#part-1-12">Part 1</a></li>
  <li><a href="#part-2-12" id="toc-part-2-12" class="nav-link" data-scroll-target="#part-2-12">Part 2</a></li>
  </ul></li>
  <li><a href="#day-14-reindeer-olympics" id="toc-day-14-reindeer-olympics" class="nav-link" data-scroll-target="#day-14-reindeer-olympics">Day 14: Reindeer Olympics</a>
  <ul class="collapse">
  <li><a href="#part-1-13" id="toc-part-1-13" class="nav-link" data-scroll-target="#part-1-13">Part 1</a></li>
  <li><a href="#part-2-13" id="toc-part-2-13" class="nav-link" data-scroll-target="#part-2-13">Part 2</a></li>
  </ul></li>
  <li><a href="#day-15-science-for-hungry-people" id="toc-day-15-science-for-hungry-people" class="nav-link" data-scroll-target="#day-15-science-for-hungry-people">Day 15: Science for Hungry People</a>
  <ul class="collapse">
  <li><a href="#part-1-14" id="toc-part-1-14" class="nav-link" data-scroll-target="#part-1-14">Part 1</a></li>
  <li><a href="#part-2-14" id="toc-part-2-14" class="nav-link" data-scroll-target="#part-2-14">Part 2</a></li>
  </ul></li>
  <li><a href="#day-16-aunt-sue" id="toc-day-16-aunt-sue" class="nav-link" data-scroll-target="#day-16-aunt-sue">Day 16: Aunt Sue</a>
  <ul class="collapse">
  <li><a href="#part-1-15" id="toc-part-1-15" class="nav-link" data-scroll-target="#part-1-15">Part 1</a></li>
  <li><a href="#part-2-15" id="toc-part-2-15" class="nav-link" data-scroll-target="#part-2-15">Part 2</a></li>
  </ul></li>
  <li><a href="#day-17-no-such-thing-as-too-much" id="toc-day-17-no-such-thing-as-too-much" class="nav-link" data-scroll-target="#day-17-no-such-thing-as-too-much">Day 17: No Such Thing as Too Much</a>
  <ul class="collapse">
  <li><a href="#part-1-16" id="toc-part-1-16" class="nav-link" data-scroll-target="#part-1-16">Part 1</a></li>
  <li><a href="#part-2-16" id="toc-part-2-16" class="nav-link" data-scroll-target="#part-2-16">Part 2</a></li>
  </ul></li>
  <li><a href="#day-18-like-a-gif-for-your-yard" id="toc-day-18-like-a-gif-for-your-yard" class="nav-link" data-scroll-target="#day-18-like-a-gif-for-your-yard">Day 18: Like a GIF For Your Yard</a>
  <ul class="collapse">
  <li><a href="#part-1-17" id="toc-part-1-17" class="nav-link" data-scroll-target="#part-1-17">Part 1</a></li>
  <li><a href="#part-2-17" id="toc-part-2-17" class="nav-link" data-scroll-target="#part-2-17">Part 2</a></li>
  </ul></li>
  <li><a href="#day-19-medicine-for-rudolph" id="toc-day-19-medicine-for-rudolph" class="nav-link" data-scroll-target="#day-19-medicine-for-rudolph">Day 19: Medicine for Rudolph</a>
  <ul class="collapse">
  <li><a href="#part-1-18" id="toc-part-1-18" class="nav-link" data-scroll-target="#part-1-18">Part 1</a></li>
  <li><a href="#part-2-18" id="toc-part-2-18" class="nav-link" data-scroll-target="#part-2-18">Part 2</a></li>
  </ul></li>
  <li><a href="#day-20-infinite-elves-and-infinite-houses" id="toc-day-20-infinite-elves-and-infinite-houses" class="nav-link" data-scroll-target="#day-20-infinite-elves-and-infinite-houses">Day 20: Infinite Elves and Infinite Houses</a>
  <ul class="collapse">
  <li><a href="#part-1-19" id="toc-part-1-19" class="nav-link" data-scroll-target="#part-1-19">Part 1</a></li>
  <li><a href="#part-2-19" id="toc-part-2-19" class="nav-link" data-scroll-target="#part-2-19">Part 2</a></li>
  </ul></li>
  <li><a href="#day-21-rpg-simulator-20xx" id="toc-day-21-rpg-simulator-20xx" class="nav-link" data-scroll-target="#day-21-rpg-simulator-20xx">Day 21: RPG Simulator 20XX</a>
  <ul class="collapse">
  <li><a href="#part-1-20" id="toc-part-1-20" class="nav-link" data-scroll-target="#part-1-20">Part 1</a></li>
  <li><a href="#part-2-20" id="toc-part-2-20" class="nav-link" data-scroll-target="#part-2-20">Part 2</a></li>
  </ul></li>
  <li><a href="#day-22-wizard-simulator-20xx" id="toc-day-22-wizard-simulator-20xx" class="nav-link" data-scroll-target="#day-22-wizard-simulator-20xx">Day 22: Wizard Simulator 20XX</a>
  <ul class="collapse">
  <li><a href="#part-1-21" id="toc-part-1-21" class="nav-link" data-scroll-target="#part-1-21">Part 1</a></li>
  <li><a href="#part-2-21" id="toc-part-2-21" class="nav-link" data-scroll-target="#part-2-21">Part 2</a></li>
  </ul></li>
  <li><a href="#day-23-opening-the-turing-lock" id="toc-day-23-opening-the-turing-lock" class="nav-link" data-scroll-target="#day-23-opening-the-turing-lock">Day 23: Opening the Turing Lock</a>
  <ul class="collapse">
  <li><a href="#part-1-22" id="toc-part-1-22" class="nav-link" data-scroll-target="#part-1-22">Part 1</a></li>
  <li><a href="#part-2-22" id="toc-part-2-22" class="nav-link" data-scroll-target="#part-2-22">Part 2</a></li>
  </ul></li>
  <li><a href="#day-24-it-hangs-in-the-balance" id="toc-day-24-it-hangs-in-the-balance" class="nav-link" data-scroll-target="#day-24-it-hangs-in-the-balance">Day 24: It Hangs in the Balance</a>
  <ul class="collapse">
  <li><a href="#part-1-23" id="toc-part-1-23" class="nav-link" data-scroll-target="#part-1-23">Part 1</a></li>
  <li><a href="#part-2-23" id="toc-part-2-23" class="nav-link" data-scroll-target="#part-2-23">Part 2</a></li>
  </ul></li>
  <li><a href="#day-25-let-it-snow" id="toc-day-25-let-it-snow" class="nav-link" data-scroll-target="#day-25-let-it-snow">Day 25: Let It Snow</a>
  <ul class="collapse">
  <li><a href="#part-1-24" id="toc-part-1-24" class="nav-link" data-scroll-target="#part-1-24">Part 1</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">2015 Solutions</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="imports" class="level1">
<h1>Imports</h1>
<div class="cell" data-execution_count="1">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> functools</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itertools</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> queue <span class="im">import</span> PriorityQueue</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> more_itertools</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>sys.path.insert(<span class="dv">1</span>, os.path.join(sys.path[<span class="dv">0</span>], <span class="st">".."</span>))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> utils</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>load <span class="op">=</span> utils.year_load(<span class="dv">2015</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="day-1-not-quite-lisp" class="level1">
<h1><a href="https://adventofcode.com/2015/day/1">Day 1: Not Quite Lisp</a></h1>
<section id="part-1" class="level2">
<h2 class="anchored" data-anchor-id="part-1">Part 1</h2>
<div class="cell" data-execution_count="2">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> load(<span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>line.count(<span class="st">"("</span>) <span class="op">-</span> line.count(<span class="st">")"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2" class="level2">
<h2 class="anchored" data-anchor-id="part-2">Part 2</h2>
<div class="cell" data-execution_count="3">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>position <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, character <span class="kw">in</span> <span class="bu">enumerate</span>(line):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> position <span class="op">+</span> (<span class="dv">1</span> <span class="cf">if</span> character <span class="op">==</span> <span class="st">"("</span> <span class="cf">else</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> position <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>idx <span class="op">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-2-i-was-told-there-would-be-no-math" class="level1">
<h1><a href="https://adventofcode.com/2015/day/2">Day 2: I Was Told There Would Be No Math</a></h1>
<section id="part-1-1" class="level2">
<h2 class="anchored" data-anchor-id="part-1-1">Part 1</h2>
<div class="cell" data-execution_count="4">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">2</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>boxes <span class="op">=</span> [[<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> line.split(<span class="st">'x'</span>)] <span class="cf">for</span> line <span class="kw">in</span> data]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([(<span class="dv">3</span><span class="op">*</span>x<span class="op">*</span>y <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>x<span class="op">*</span>z <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>y<span class="op">*</span>z) <span class="cf">for</span> x,y,z <span class="kw">in</span> <span class="bu">map</span>(<span class="bu">sorted</span>, boxes)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-1" class="level2">
<h2 class="anchored" data-anchor-id="part-2-1">Part 2</h2>
<div class="cell" data-execution_count="5">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([ x <span class="op">*</span> y <span class="op">*</span> z <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> (x <span class="op">+</span> y) <span class="cf">for</span> x,y,z <span class="kw">in</span> <span class="bu">map</span>(<span class="bu">sorted</span>, boxes)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-3-perfectly-spherical-houses-in-a-vacuum" class="level1">
<h1><a href="https://adventofcode.com/2015/day/3">Day 3: Perfectly Spherical Houses in a Vacuum</a></h1>
<section id="part-1-2" class="level2">
<h2 class="anchored" data-anchor-id="part-1-2">Part 1</h2>
<div class="cell" data-execution_count="6">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>instructions <span class="op">=</span> load(<span class="dv">3</span>)[<span class="dv">0</span>]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>commands <span class="op">=</span> {<span class="st">"^"</span>: <span class="kw">lambda</span> x, y: (x, y <span class="op">+</span> <span class="dv">1</span>), <span class="st">"v"</span>: <span class="kw">lambda</span> x, y: (x, y <span class="op">-</span> <span class="dv">1</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"&gt;"</span>: <span class="kw">lambda</span> x, y: (x <span class="op">+</span> <span class="dv">1</span>, y), <span class="st">"&lt;"</span>: <span class="kw">lambda</span> x, y: (x <span class="op">-</span> <span class="dv">1</span>, y),}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> execute_instructions(instructions, houses<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> houses <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        houses <span class="op">=</span> {(<span class="dv">0</span>, <span class="dv">0</span>): <span class="dv">1</span>}</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> instruction <span class="kw">in</span> instructions:</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        position <span class="op">=</span> commands[instruction](<span class="op">*</span>position)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        houses[position] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> houses</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(execute_instructions(instructions))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-2" class="level2">
<h2 class="anchored" data-anchor-id="part-2-2">Part 2</h2>
<div class="cell" data-execution_count="7">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>houses <span class="op">=</span> execute_instructions(instructions[::<span class="dv">2</span>])</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(execute_instructions(instructions[<span class="dv">1</span>::<span class="dv">2</span>], houses))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-4-the-ideal-stocking-stuffer" class="level1">
<h1><a href="https://adventofcode.com/2015/day/4">Day 4: The Ideal Stocking Stuffer</a></h1>
<section id="part-1-3" class="level2">
<h2 class="anchored" data-anchor-id="part-1-3">Part 1</h2>
<div class="cell" data-execution_count="8">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> hashlib.md5()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>prefix <span class="op">=</span> <span class="st">"iwrupvqb"</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> brute_force(n):</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">:=</span> i <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        md5 <span class="op">=</span> hashlib.md5((prefix <span class="op">+</span> <span class="bu">str</span>(i)).encode(encoding<span class="op">=</span><span class="st">"UTF-8"</span>)).hexdigest()</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> md5[:n] <span class="op">==</span> n <span class="op">*</span> <span class="st">"0"</span>:</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>brute_force(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-3" class="level2">
<h2 class="anchored" data-anchor-id="part-2-3">Part 2</h2>
<div class="cell" data-execution_count="9">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>brute_force(<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-5-doesnt-he-have-intern-elves-for-this" class="level1">
<h1><a href="https://adventofcode.com/2015/day/5">Day 5: Doesn’t He Have Intern-Elves For This?</a></h1>
<section id="part-1-4" class="level2">
<h2 class="anchored" data-anchor-id="part-1-4">Part 1</h2>
<div class="cell" data-execution_count="10">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_nice(s):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    sufficient_vowels <span class="op">=</span> <span class="bu">len</span>(re.findall(<span class="st">"[aeiou]"</span>, s)) <span class="op">&gt;=</span> <span class="dv">3</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    contains_double <span class="op">=</span> (np.array(<span class="bu">list</span>(s))[<span class="dv">1</span>:] <span class="op">==</span> np.roll(<span class="bu">list</span>(s), <span class="dv">1</span>)[<span class="dv">1</span>:]).<span class="bu">any</span>()</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    contains_forbidden <span class="op">=</span> <span class="bu">any</span>(val <span class="kw">in</span> s <span class="cf">for</span> val <span class="kw">in</span> [<span class="st">"ab"</span>, <span class="st">"cd"</span>, <span class="st">"pq"</span>, <span class="st">"xy"</span>])</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sufficient_vowels <span class="kw">and</span> contains_double <span class="kw">and</span> <span class="kw">not</span> contains_forbidden</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(is_nice(x) <span class="cf">for</span> x <span class="kw">in</span> load(<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-4" class="level2">
<h2 class="anchored" data-anchor-id="part-2-4">Part 2</h2>
<div class="cell" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_nice(s):</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    contains_double <span class="op">=</span> (np.array(<span class="bu">list</span>(s))[<span class="dv">2</span>:] <span class="op">==</span> np.roll(<span class="bu">list</span>(s), <span class="dv">2</span>)[<span class="dv">2</span>:]).<span class="bu">any</span>()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    contains_double_pair <span class="op">=</span> <span class="bu">bool</span>(re.findall(<span class="st">"(..).*</span><span class="ch">\\</span><span class="st">1"</span>, s))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> contains_double <span class="kw">and</span> contains_double_pair</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(is_nice(x) <span class="cf">for</span> x <span class="kw">in</span> load(<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-6-probably-a-fire-hazard" class="level1">
<h1><a href="https://adventofcode.com/2015/day/6">Day 6: Probably a Fire Hazard</a></h1>
<section id="part-1-5" class="level2">
<h2 class="anchored" data-anchor-id="part-1-5">Part 1</h2>
<div class="cell" data-execution_count="12">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> load(<span class="dv">6</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [[<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> re.findall(<span class="st">"\d+"</span>, line)] <span class="cf">for</span> line <span class="kw">in</span> lines]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>instructions <span class="op">=</span> [line.replace(<span class="st">"turn "</span>, <span class="st">""</span>).split()[<span class="dv">0</span>] <span class="cf">for</span> line <span class="kw">in</span> lines]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>field <span class="op">=</span> np.zeros([<span class="dv">1000</span>, <span class="dv">1000</span>], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x1, y1, x2, y2), instruction <span class="kw">in</span> <span class="bu">zip</span>(numbers, instructions):</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> instruction <span class="op">==</span> <span class="st">"toggle"</span>:</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">^=</span> <span class="dv">1</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> <span class="bu">int</span>(instruction <span class="op">==</span> <span class="st">"on"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>field.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-5" class="level2">
<h2 class="anchored" data-anchor-id="part-2-5">Part 2</h2>
<div class="cell" data-execution_count="13">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>field <span class="op">=</span> np.zeros([<span class="dv">1000</span>, <span class="dv">1000</span>], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x1, y1, x2, y2), instruction <span class="kw">in</span> <span class="bu">zip</span>(numbers, instructions):</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> instruction <span class="op">==</span> <span class="st">"toggle"</span>:</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">+=</span> <span class="dv">2</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> <span class="bu">int</span>(instruction <span class="op">==</span> <span class="st">"on"</span>) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    field[np.where(field <span class="op">&lt;</span> <span class="dv">0</span>)] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>field.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-7-some-assembly-required" class="level1">
<h1><a href="https://adventofcode.com/2015/day/7">Day 7: Some Assembly Required</a></h1>
<section id="part-1-6" class="level2">
<h2 class="anchored" data-anchor-id="part-1-6">Part 1</h2>
<div class="cell" data-execution_count="14">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>circuit <span class="op">=</span> {target: source <span class="cf">for</span> source, target <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x.split(<span class="st">" -&gt; "</span>), load(<span class="dv">7</span>))}</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>binops <span class="op">=</span> {<span class="st">"AND"</span>: <span class="kw">lambda</span> x, y: x <span class="op">&amp;</span> y,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">"OR"</span>: <span class="kw">lambda</span> x, y: x <span class="op">|</span> y,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"LSHIFT"</span>: <span class="kw">lambda</span> x, y: x <span class="op">&lt;&lt;</span> y,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">"RSHIFT"</span>: <span class="kw">lambda</span> x, y: x <span class="op">&gt;&gt;</span> y}</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="at">@functools.cache</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> evaluate(symbol):</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">int</span>(symbol)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> circuit[symbol].split()</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(operation) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> evaluate(operation[<span class="dv">0</span>])</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(operation) <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> evaluate(operation[<span class="dv">1</span>]) <span class="op">^</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">16</span> <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>        arg1, op, arg2 <span class="op">=</span> operation</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> binops[op](evaluate(arg1), evaluate(arg2))</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>evaluate(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-6" class="level2">
<h2 class="anchored" data-anchor-id="part-2-6">Part 2</h2>
<p>We can reset everything by clearing out the cache, and setting a wire to a specific value (or expression) can be accomplished by modifying the circuit.</p>
<p>That gives</p>
<div class="cell" data-execution_count="15">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>evaluate.cache_clear()</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>circuit[<span class="st">"b"</span>] <span class="op">=</span> <span class="bu">str</span>(evaluate(<span class="st">"a"</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>evaluate(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-8-matchsticks" class="level1">
<h1><a href="https://adventofcode.com/2015/day/8">Day 8: Matchsticks</a></h1>
<section id="part-1-7" class="level2">
<h2 class="anchored" data-anchor-id="part-1-7">Part 1</h2>
<div class="cell" data-execution_count="16">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> [x[:<span class="op">-</span><span class="dv">1</span>] <span class="cf">for</span> x load(<span class="dv">8</span>)]</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="bu">len</span>(line) <span class="op">-</span> <span class="bu">len</span>(<span class="bu">eval</span>(line)) <span class="cf">for</span> line <span class="kw">in</span> lines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-7" class="level2">
<h2 class="anchored" data-anchor-id="part-2-7">Part 2</h2>
<div class="cell" data-execution_count="17">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="dv">2</span> <span class="op">+</span> <span class="bu">len</span>([x <span class="cf">for</span> x <span class="kw">in</span> line <span class="cf">if</span> x <span class="kw">in</span> [<span class="st">"</span><span class="ch">\"</span><span class="st">"</span>, <span class="st">"</span><span class="ch">\\</span><span class="st">"</span>]]) <span class="cf">for</span> line <span class="kw">in</span> lines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-9-all-in-a-single-night" class="level1">
<h1><a href="https://adventofcode.com/2015/day/9">Day 9: All in a Single Night</a></h1>
<section id="part-1-8" class="level2">
<h2 class="anchored" data-anchor-id="part-1-8">Part 1</h2>
<div class="cell" data-execution_count="18">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> {}</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [x.split() <span class="cf">for</span> x <span class="kw">in</span> load(<span class="dv">9</span>)]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> source, _, destination, __, distance <span class="kw">in</span> data:</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    d[(source, destination)] <span class="op">=</span> <span class="bu">int</span>(distance)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    d[(destination, source)] <span class="op">=</span> <span class="bu">int</span>(distance)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> <span class="bu">set</span>(x[<span class="dv">0</span>] <span class="cf">for</span> x <span class="kw">in</span> d.keys())</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>tours <span class="op">=</span> [<span class="bu">sum</span>(d[route[start], route[start <span class="op">+</span> <span class="dv">1</span>]] <span class="cf">for</span> start <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities) <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>         <span class="cf">for</span> route <span class="kw">in</span> itertools.permutations(cities)]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="bu">min</span>(tours)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-8" class="level2">
<h2 class="anchored" data-anchor-id="part-2-8">Part 2</h2>
<div class="cell" data-execution_count="19">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(tours)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-10-elves-look-elves-say" class="level1">
<h1><a href="https://adventofcode.com/2015/day/10">Day 10: Elves Look, Elves Say</a></h1>
<section id="part-1-9" class="level2">
<h2 class="anchored" data-anchor-id="part-1-9">Part 1</h2>
<div class="cell" data-execution_count="20">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>message <span class="op">=</span> <span class="st">"3113322113"</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>regex <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"(([123])\2*)"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">40</span>):</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    runs <span class="op">=</span> re.findall(regex, message)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    message <span class="op">=</span> <span class="st">''</span>.join([<span class="bu">str</span>(<span class="bu">len</span>(run)) <span class="op">+</span> run[<span class="dv">0</span>] <span class="cf">for</span> run <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x[<span class="dv">0</span>], runs)])</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(message)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-9" class="level2">
<h2 class="anchored" data-anchor-id="part-2-9">Part 2</h2>
<div class="cell" data-execution_count="21">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    runs <span class="op">=</span> re.findall(regex, message)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    message <span class="op">=</span> <span class="st">''</span>.join([<span class="bu">str</span>(<span class="bu">len</span>(run)) <span class="op">+</span> run[<span class="dv">0</span>] <span class="cf">for</span> run <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x[<span class="dv">0</span>], runs)])</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(message)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-11-corporate-policy" class="level1">
<h1><a href="https://adventofcode.com/2015/day/11">Day 11: Corporate Policy</a></h1>
<section id="part-1-10" class="level2">
<h2 class="anchored" data-anchor-id="part-1-10">Part 1</h2>
<p>So there are two jobs here:</p>
<ol type="1">
<li>Determine whether a candidate password is valid</li>
<li>Iterate over candidate passwords in order, starting with the puzzle input</li>
</ol>
<p>Is valid is not too difficult to accomplish. The “straight” condition can be rewritten as “1, 1” appears somewhere in the list of differences between neighboring characters. The “double pair” condition can be shortly expressed as matching a simple regex. Forbidding certain characters outright is most easily accomplished by never generating them as candidates</p>
<p>To iterate over candidate passwords, we first construct a helper method to iterate over candidate passwords that keep some prefix string fixed. The full iterator is then a chain over all these with successively shorter prefix strings.</p>
<div class="cell" data-execution_count="22">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> has_straight(password):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(password, <span class="bu">str</span>):</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        password <span class="op">=</span> np.array([<span class="bu">ord</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    differences <span class="op">=</span> np.diff(password)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">1</span>, <span class="dv">1</span>) <span class="kw">in</span> <span class="bu">zip</span>(differences, differences[<span class="dv">1</span>:])</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"(.)\1.*(.)\2"</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> has_double_pair(password):</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">bool</span>(re.search(r, <span class="st">""</span>.join(<span class="bu">chr</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password)))</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_valid_password(password):</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> has_double_pair(password) <span class="kw">and</span> has_straight(password)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>puzzle_input <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">ord</span>(x) <span class="cf">for</span> x <span class="kw">in</span> <span class="st">"hxbxwxba"</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>password <span class="op">=</span> puzzle_input</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>characters <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">ord</span>(x) <span class="cf">for</span> x <span class="kw">in</span> <span class="st">"abcdefghjkmnpqrstuvwxyz"</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iterate(string, prefix_length):</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    n_free <span class="op">=</span> <span class="bu">len</span>(string) <span class="op">-</span> prefix_length <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    first <span class="op">=</span> characters[characters.index(string[prefix_length]) <span class="op">+</span> <span class="dv">1</span> :]</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    suffixes <span class="op">=</span> itertools.product(first, <span class="op">*</span>([characters] <span class="op">*</span> n_free))</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> suffix <span class="kw">in</span> suffixes:</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> string[:prefix_length] <span class="op">+</span> suffix</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>password_iterator <span class="op">=</span> itertools.chain.from_iterable(</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    [iterate(password, l) <span class="cf">for</span> l <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(password))][::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> is_valid_password(password):</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="bu">next</span>(password_iterator)</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>.join(<span class="bu">chr</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-10" class="level2">
<h2 class="anchored" data-anchor-id="part-2-10">Part 2</h2>
<div class="cell" data-execution_count="23">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>password <span class="op">=</span> <span class="bu">next</span>(password_iterator)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> is_valid_password(password):</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="bu">next</span>(password_iterator)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>.join(<span class="bu">chr</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-12-jsabacusframework.io" class="level1">
<h1><a href="https://adventofcode.com/2015/day/12">Day 12: JSAbacusFramework.io</a></h1>
<section id="part-1-11" class="level2">
<h2 class="anchored" data-anchor-id="part-1-11">Part 1</h2>
<p>For the first part, we’ve been promised that integers only appear as integers. So there’s no reason to try and read in the json properly - a simple regex does the trick</p>
<div class="cell" data-execution_count="24">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> load(<span class="dv">12</span>, <span class="st">"int"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([n <span class="cf">for</span> line <span class="kw">in</span> s <span class="cf">for</span> n <span class="kw">in</span> line])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-11" class="level2">
<h2 class="anchored" data-anchor-id="part-2-11">Part 2</h2>
<p>That approach obviously doesn’t work for the second part, so we’ll need a json library</p>
<div class="cell" data-execution_count="25">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> json.loads(load(<span class="dv">12</span>, <span class="st">"raw"</span>))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_value(structure):</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(structure, <span class="bu">str</span>):</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(structure, <span class="bu">int</span>):</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> structure</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(structure, <span class="bu">list</span>):</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="bu">sum</span>(find_value(x) <span class="cf">for</span> x <span class="kw">in</span> structure))</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"red"</span> <span class="kw">in</span> structure.values():</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(find_value(x) <span class="cf">for</span> x <span class="kw">in</span> structure.values())</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>find_value(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-13-knights-of-the-dinner-table" class="level1">
<h1><a href="https://adventofcode.com/2015/day/13">Day 13: Knights of the Dinner Table</a></h1>
<section id="part-1-12" class="level2">
<h2 class="anchored" data-anchor-id="part-1-12">Part 1</h2>
<div class="cell" data-execution_count="26">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">13</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse(line):</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    words <span class="op">=</span> line.split()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    people <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">sorted</span>([words[<span class="dv">0</span>], words[<span class="op">-</span><span class="dv">1</span>][:<span class="op">-</span><span class="dv">1</span>]]))</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    amount <span class="op">=</span> <span class="bu">int</span>(re.search(<span class="st">"(\d+)"</span>, line).groups(<span class="dv">0</span>)[<span class="dv">0</span>])</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    sign <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> (<span class="st">"gain"</span> <span class="kw">in</span> words) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> people, amount <span class="op">*</span> sign</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>scores <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> load(<span class="dv">13</span>):</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    people, score <span class="op">=</span> parse(line)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    scores[people] <span class="op">+=</span> score</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> <span class="bu">sorted</span>(<span class="bu">set</span>([person <span class="cf">for</span> pair <span class="kw">in</span> scores.keys() <span class="cf">for</span> person <span class="kw">in</span> pair]))</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_score(permutation):</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(permutation)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>        score <span class="op">+=</span> scores[<span class="bu">tuple</span>(<span class="bu">sorted</span>([permutation[i], permutation[(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> n]]))]</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>maxval <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> permutation <span class="kw">in</span> itertools.permutations(people[<span class="dv">1</span>:]):</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> calculate_score((people[<span class="dv">0</span>],) <span class="op">+</span> permutation)</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> score <span class="op">&gt;</span> maxval:</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>        maxval <span class="op">=</span> score</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>maxval</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-12" class="level2">
<h2 class="anchored" data-anchor-id="part-2-12">Part 2</h2>
<p>Here we see the magic of the defaultdict - since all of the pairs involving “You” have a net score of zero, we don’t need to change the scoring dictionary at all. We just add “You” to the people we are permuting over, and run everything exactly as before.</p>
<div class="cell" data-execution_count="27">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>maxval <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> permutation <span class="kw">in</span> itertools.permutations(people[<span class="dv">1</span>:] <span class="op">+</span> [<span class="st">"You"</span>]):</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> calculate_score((people[<span class="dv">0</span>],) <span class="op">+</span> permutation)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> score <span class="op">&gt;</span> maxval:</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>        maxval <span class="op">=</span> score</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>maxval</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-14-reindeer-olympics" class="level1">
<h1><a href="https://adventofcode.com/2015/day/14">Day 14: Reindeer Olympics</a></h1>
<section id="part-1-13" class="level2">
<h2 class="anchored" data-anchor-id="part-1-13">Part 1</h2>
<div class="cell" data-execution_count="28">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>reindeer <span class="op">=</span> load(<span class="dv">14</span>, <span class="st">"int"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> score(time, speed, on, off):</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    cycle_length <span class="op">=</span> on <span class="op">+</span> off</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    n_cycles <span class="op">=</span> time <span class="op">//</span> (cycle_length)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    offset <span class="op">=</span> <span class="bu">min</span>(on, n_cycles <span class="op">%</span> cycle_length)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> speed <span class="op">*</span> (n_cycles <span class="op">*</span> on <span class="op">+</span> offset)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: score(<span class="dv">2503</span>, <span class="op">*</span>x), reindeer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-13" class="level2">
<h2 class="anchored" data-anchor-id="part-2-13">Part 2</h2>
<div class="cell" data-execution_count="29">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>wins <span class="op">=</span> np.zeros(<span class="bu">len</span>(numbers))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>positions <span class="op">=</span> np.zeros(<span class="bu">len</span>(numbers))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2503</span>):</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (speed, on, off) <span class="kw">in</span> <span class="bu">enumerate</span>(reindeer):</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        cycle_length <span class="op">=</span> on <span class="op">+</span> off</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">%</span> cycle_length <span class="op">&lt;</span> on:</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>            positions[idx] <span class="op">+=</span> speed</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    wins <span class="op">+=</span> (positions <span class="op">==</span> <span class="bu">max</span>(positions))</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(wins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-15-science-for-hungry-people" class="level1">
<h1><a href="https://adventofcode.com/2015/day/15">Day 15: Science for Hungry People</a></h1>
<section id="part-1-14" class="level2">
<h2 class="anchored" data-anchor-id="part-1-14">Part 1</h2>
<p>Since each of the values has to be positive, we can derive some constraints on how much of each ingredient we can use. We know there are 100 of each in total, so letting the four variables be <span class="math inline">\(w, x, y, z\)</span>, we have <span class="math inline">\(w + x + y + z = 100\)</span>. Additionally, since only one ingredient contributes a positive value to any given quantitity we have to use at least one of each. With that out of the way we can use the matrix to set up the following system of inequalities:</p>
<span class="math display">\[\begin{align*}
3w - 3x - y &amp;&gt; 0 \\
4y - 3z &amp;&gt; 0 \\
-3w + 2z &amp;&gt; 0
\end{align*}\]</span>
<p>From that we can derive the following bounds for the amount of each ingredient</p>
<span class="math display">\[\begin{align*}
1 &amp;\leq w\leq 39\\
1 &amp;\leq x\leq 39\\
1 &amp;\leq y\leq 72\\
1 &amp;\leq z\leq 65
\end{align*}\]</span>
<p>For example, the upper bound on <span class="math inline">\(w\)</span> follows from the last inequality, which implies that <span class="math inline">\(z &gt; 1.5 w\)</span>. The one on <span class="math inline">\(x\)</span> comes from the first inequality, which implies that <span class="math inline">\(x &lt; w\)</span>.</p>
<p>The last thing to consider is that once three of the values are fixed, the fourth is known. Together, these optimizations let us reduce the cases we have to consider from 1 million to less than 50k.</p>
<div class="cell" data-execution_count="30">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.array(load(<span class="dv">15</span>, <span class="st">"int"</span>)).T</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>initial_bounds <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">39</span> <span class="op">+</span> <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">39</span> <span class="op">+</span> <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">72</span> <span class="op">+</span> <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">65</span> <span class="op">+</span> <span class="dv">1</span>]]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate(part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    maxval <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> w <span class="kw">in</span> <span class="bu">range</span>(<span class="op">*</span>initial_bounds[<span class="dv">0</span>]):</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, w):</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>            left, right <span class="op">=</span> initial_bounds[<span class="dv">2</span>]</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>            new_y <span class="op">=</span> <span class="dv">3</span> <span class="op">*</span> (w <span class="op">-</span> x)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(left, <span class="bu">min</span>(right, new_y)):</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>                z <span class="op">=</span> <span class="dv">100</span> <span class="op">-</span> x <span class="op">-</span> y <span class="op">-</span> w</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>                score <span class="op">=</span> (data <span class="op">@</span> (w, x, y, z))</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (score <span class="op">&lt;=</span> <span class="dv">0</span>).<span class="bu">any</span>() <span class="kw">or</span> (part <span class="op">==</span> <span class="dv">2</span> <span class="kw">and</span> (score[<span class="op">-</span><span class="dv">1</span>] <span class="op">!=</span> <span class="dv">500</span>)):</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">continue</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>                val <span class="op">=</span> np.product(score[:<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> val <span class="op">&gt;</span> maxval:</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>                    maxval <span class="op">=</span> val</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> maxval</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>calculate()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-14" class="level2">
<h2 class="anchored" data-anchor-id="part-2-14">Part 2</h2>
<div class="cell" data-execution_count="31">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>calculate(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-16-aunt-sue" class="level1">
<h1><a href="https://adventofcode.com/2015/day/16">Day 16: Aunt Sue</a></h1>
<section id="part-1-15" class="level2">
<h2 class="anchored" data-anchor-id="part-1-15">Part 1</h2>
<div class="cell" data-execution_count="32">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">16</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>sues <span class="op">=</span> {}</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> data:</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    sep <span class="op">=</span> line.index(<span class="st">":"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    sue, info <span class="op">=</span> line[:sep], line[sep <span class="op">+</span> <span class="dv">1</span> :]</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    sues[<span class="bu">int</span>(sue.split()[<span class="dv">1</span>])] <span class="op">=</span> {</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        k: <span class="bu">int</span>(v) <span class="cf">for</span> k, v <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x.split(<span class="st">": "</span>), info.split(<span class="st">", "</span>))</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>match <span class="op">=</span> {</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"children"</span>: <span class="dv">3</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cats"</span>: <span class="dv">7</span>,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"samoyeds"</span>: <span class="dv">2</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pomeranians"</span>: <span class="dv">3</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"akitas"</span>: <span class="dv">0</span>,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"vizslas"</span>: <span class="dv">0</span>,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"goldfish"</span>: <span class="dv">5</span>,</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"trees"</span>: <span class="dv">3</span>,</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cars"</span>: <span class="dv">2</span>,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"perfumes"</span>: <span class="dv">1</span>,</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sue <span class="kw">in</span> sues:</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    comparison <span class="op">=</span> sues[sue]</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> match:</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">not</span> <span class="kw">in</span> comparison:</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> match[key] <span class="op">!=</span> comparison[key]:</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(sue)</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-15" class="level2">
<h2 class="anchored" data-anchor-id="part-2-15">Part 2</h2>
<div class="cell" data-execution_count="33">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sue <span class="kw">in</span> sues:</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    comparison <span class="op">=</span> sues[sue]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> match:</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">not</span> <span class="kw">in</span> comparison:</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        f <span class="op">=</span> <span class="kw">lambda</span> known, measured: known <span class="op">==</span> measured</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">in</span> [<span class="st">"cats"</span>, <span class="st">"trees"</span>]:</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> <span class="kw">lambda</span> known, measured: measured <span class="op">&gt;</span> known</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> key <span class="kw">in</span> [<span class="st">"pomeranians"</span>, <span class="st">"goldfish"</span>]:</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> <span class="kw">lambda</span> known, measured: measured <span class="op">&lt;</span> known</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> f(match[key], comparison[key]):</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(sue)</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-17-no-such-thing-as-too-much" class="level1">
<h1><a href="https://adventofcode.com/2015/day/17">Day 17: No Such Thing as Too Much</a></h1>
<section id="part-1-16" class="level2">
<h2 class="anchored" data-anchor-id="part-1-16">Part 1</h2>
<div class="cell" data-execution_count="34">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> count(value, containers):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> value <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> value <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">or</span> <span class="bu">len</span>(containers) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count(value <span class="op">-</span> containers[<span class="dv">0</span>], containers[<span class="dv">1</span>:]) <span class="op">+</span> count(value, containers[<span class="dv">1</span>:])</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>count(<span class="dv">150</span>, load(<span class="dv">17</span>, <span class="st">"np"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-16" class="level2">
<h2 class="anchored" data-anchor-id="part-2-16">Part 2</h2>
<div class="cell" data-execution_count="35">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> count(value, containers):</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> inner(value, containers, depth):</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> value <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>            result[depth] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> value <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">or</span> <span class="bu">len</span>(containers) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        inner(value <span class="op">-</span> containers[<span class="dv">0</span>], containers[<span class="dv">1</span>:], depth <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>        inner(value, containers[<span class="dv">1</span>:], depth)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    inner(value, containers, <span class="dv">0</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> count(<span class="dv">150</span>, load(<span class="dv">17</span>, <span class="st">"np"</span>))</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>result[<span class="bu">min</span>(result.keys())]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-18-like-a-gif-for-your-yard" class="level1">
<h1><a href="https://adventofcode.com/2015/day/18">Day 18: Like a GIF For Your Yard</a></h1>
<section id="part-1-17" class="level2">
<h2 class="anchored" data-anchor-id="part-1-17">Part 1</h2>
<div class="cell" data-execution_count="36">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>initial_board <span class="op">=</span> np.array(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    [[<span class="dv">0</span> <span class="cf">if</span> char <span class="op">==</span> <span class="st">"."</span> <span class="cf">else</span> <span class="dv">1</span> <span class="cf">for</span> char <span class="kw">in</span> line] <span class="cf">for</span> line <span class="kw">in</span> load(<span class="dv">18</span>)]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>board <span class="op">=</span> initial_board.copy()</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> scipy.ndimage.convolve(board, weights, mode<span class="op">=</span><span class="st">"constant"</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    board <span class="op">=</span> ((mask <span class="op">==</span> <span class="dv">3</span>) <span class="op">|</span> ((mask <span class="op">-</span> board) <span class="op">==</span> <span class="dv">3</span>)).astype(<span class="bu">int</span>)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>board.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-17" class="level2">
<h2 class="anchored" data-anchor-id="part-2-17">Part 2</h2>
<div class="cell" data-execution_count="37">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fix_corners(board):</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    board <span class="op">=</span> np.roll(board, <span class="dv">1</span>, axis<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    board[:<span class="dv">2</span>, :<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.roll(board, <span class="op">-</span><span class="dv">1</span>, axis<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>board <span class="op">=</span> fix_corners(initial_board)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> scipy.ndimage.convolve(board, weights, mode<span class="op">=</span><span class="st">'constant'</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    board <span class="op">=</span> fix_corners(((mask <span class="op">==</span> <span class="dv">3</span>) <span class="op">|</span> ((mask <span class="op">-</span> board) <span class="op">==</span> <span class="dv">3</span>)).astype(<span class="bu">int</span>))</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>board.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-19-medicine-for-rudolph" class="level1">
<h1><a href="https://adventofcode.com/2015/day/19">Day 19: Medicine for Rudolph</a></h1>
<section id="part-1-18" class="level2">
<h2 class="anchored" data-anchor-id="part-1-18">Part 1</h2>
<div class="cell" data-execution_count="38">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">19</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>transitions, initial_string <span class="op">=</span> data[:<span class="op">-</span><span class="dv">2</span>], data[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>transitions <span class="op">=</span> [x.split(<span class="st">" =&gt; "</span>) <span class="cf">for</span> x <span class="kw">in</span> transitions]</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>transformations <span class="op">=</span> defaultdict(<span class="bu">list</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> source, dest <span class="kw">in</span> transitions:</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    transformations[source].append(dest)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>element_regex <span class="op">=</span> <span class="st">"[A-Z][a-z]?"</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>elements <span class="op">=</span> re.findall(element_regex, initial_string)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, element <span class="kw">in</span> <span class="bu">enumerate</span>(elements):</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    prefix <span class="op">=</span> <span class="st">''</span>.join(elements[:idx])</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    suffix <span class="op">=</span> <span class="st">''</span>.join(elements[idx<span class="op">+</span><span class="dv">1</span>:])</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> transformation <span class="kw">in</span> transformations[element]:</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>        result.add(prefix <span class="op">+</span> transformation <span class="op">+</span> suffix)</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-18" class="level2">
<h2 class="anchored" data-anchor-id="part-2-18">Part 2</h2>
<p>Instead of trying to make the final string starting from “e” and using the given transformations, we can equivalently try to reduce the final string to “e” using the reverse transformations - that should be the same thing.</p>
<p>If we’re naive about this, it’s going to take a very long time. One thing to notice is that “Ca” only appears on the right hand side of our transformation rules as “X =&gt; XCa” or “X =&gt; CaX”. So generating one unit of “Ca” always takes one step, and we can pretend there’s a rule of the form “’∅ =&gt; Ca”.</p>
<p>That still leaves us with more than 100k candidates for shortening after only 4 reverse substitutions, which is less than ideal. Luckily, there’s a pen and paper solution!</p>
<p>Looking further at the list of reactions given, all the ones that don’t produce Rn are of the form “A =&gt; BC”, and thus always take exactly one step to increase the length of the molecule by one.</p>
<p>The only remaining question is how efficiently we can use the Rn we have available. Now, some of the “Rn” reactions give a “C” to start with, but “C” is not the source of any reaction and it’s not present in our string, so we can completely ignore these. Looking at the remainder, all the reactions convert one element into four, apart from “H =&gt; NRnFYFAr” and “Ca =&gt; SiRnFYFAr”, which convert one to six. There are only 6 Ys in the initial string, so these reactions have to run exactly six times, and the others run 30 times (There are 36 Rns in my input)</p>
<p>There are 292 elements in the initial string. After getting rid of Rns I have 292 - 5 * 6 - 3 * 30 = 172 elements left, and have spent 36 reactions. Getting to one electron requires a further 171 reactions for a total of 207.</p>
</section>
</section>
<section id="day-20-infinite-elves-and-infinite-houses" class="level1">
<h1><a href="https://adventofcode.com/2015/day/20">Day 20: Infinite Elves and Infinite Houses</a></h1>
<section id="part-1-19" class="level2">
<h2 class="anchored" data-anchor-id="part-1-19">Part 1</h2>
<p>We’re looking for numbers that have lots of divisors compared to how big they are. A bit of ass-pulling lets me guess that they have to be divisible by 60.</p>
<div class="cell" data-execution_count="39">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>target <span class="op">=</span> <span class="dv">33100000</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sum_of_factors(n, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">int</span>(np.sqrt(n)) <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> part <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>                result <span class="op">+=</span> i <span class="op">+</span> <span class="bu">int</span>(n <span class="op">//</span> i)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>                div <span class="op">=</span> n <span class="op">//</span> i</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>                result <span class="op">+=</span> (i <span class="cf">if</span> div <span class="op">&lt;=</span> <span class="dv">50</span> <span class="cf">else</span> <span class="dv">0</span>) <span class="op">+</span> (div <span class="cf">if</span> i <span class="op">&lt;=</span> <span class="dv">50</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(target, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    i, total <span class="op">=</span> <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> total <span class="op">&lt;</span> target:</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">60</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>        total <span class="op">=</span> sum_of_factors(i, part)</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>run(target <span class="op">/</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-19" class="level2">
<h2 class="anchored" data-anchor-id="part-2-19">Part 2</h2>
<p>The only things that change for part 2 are the target, and the calculation of the sum of factors. That’s most easily done by passing a “part” flag to the sum of factors function, and a “target” parameter to run. Of course, that makes the following look fairly boring:</p>
<div class="cell" data-execution_count="40">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>run(target <span class="op">/</span> <span class="dv">11</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-21-rpg-simulator-20xx" class="level1">
<h1><a href="https://adventofcode.com/2015/day/21">Day 21: RPG Simulator 20XX</a></h1>
<section id="part-1-20" class="level2">
<h2 class="anchored" data-anchor-id="part-1-20">Part 1</h2>
<div class="cell" data-execution_count="41">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {k: <span class="bu">int</span>(v) <span class="cf">for</span> k, v <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x.split(<span class="st">":"</span>), load(<span class="dv">20</span>))}</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>turns <span class="op">=</span> [(armor, np.ceil(<span class="dv">100</span> <span class="op">/</span> (data[<span class="st">"Damage"</span>] <span class="op">-</span> armor)) <span class="op">-</span> <span class="dv">1</span>) <span class="cf">for</span> armor <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">8</span>)]</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>attack_needed <span class="op">=</span> [</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    np.ceil(data[<span class="st">"Hit Points"</span>] <span class="op">/</span> (x[<span class="dv">1</span>] <span class="op">+</span> <span class="dv">1</span>)) <span class="op">+</span> data[<span class="st">"Armor"</span>] <span class="cf">for</span> x <span class="kw">in</span> turns</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>equipment <span class="op">=</span> load(<span class="st">"20_auxiliary"</span>, <span class="st">"int"</span>)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>equipment <span class="op">=</span> equipment[:<span class="dv">10</span>] <span class="op">+</span> [x[<span class="dv">1</span>:] <span class="cf">for</span> x <span class="kw">in</span> equipment[<span class="dv">10</span>:]]</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>weapons <span class="op">=</span> equipment[:<span class="dv">5</span>]</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>armor <span class="op">=</span> equipment[<span class="dv">5</span>:<span class="dv">10</span>]</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>rings <span class="op">=</span> equipment[<span class="dv">10</span>:]</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Use itertools to select one weapon, at most one armor and at most two rings</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>options <span class="op">=</span> itertools.product(</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    weapons,</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    itertools.chain([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]], armor),</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    itertools.chain([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]], rings, itertools.combinations(rings, <span class="dv">2</span>)),</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="co"># The two ring case has to be flattened</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>options <span class="op">=</span> [</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">list</span>(option[:<span class="op">-</span><span class="dv">1</span>]) <span class="op">+</span> <span class="bu">list</span>(option[<span class="op">-</span><span class="dv">1</span>]) <span class="cf">if</span> <span class="bu">isinstance</span>(option[<span class="op">-</span><span class="dv">1</span>], <span class="bu">tuple</span>) <span class="cf">else</span> option</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> option <span class="kw">in</span> options</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Then we have regular data and can just convert to a numpy array and sum</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>sums <span class="op">=</span> [np.array(option, dtype<span class="op">=</span><span class="bu">int</span>).<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>) <span class="cf">for</span> option <span class="kw">in</span> options]</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a><span class="co"># We need the smallest gold value that has enough (damage, armor)</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a><span class="bu">min</span>(s[<span class="dv">0</span>] <span class="cf">for</span> s <span class="kw">in</span> sums <span class="cf">if</span> s[<span class="dv">1</span>] <span class="op">&gt;=</span> attack_needed[<span class="bu">min</span>(s[<span class="dv">2</span>], <span class="dv">7</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-20" class="level2">
<h2 class="anchored" data-anchor-id="part-2-20">Part 2</h2>
<p>With all that in place, part 2 is just inverting an inequality and changing a min to a max:</p>
<div class="cell" data-execution_count="42">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(s[<span class="dv">0</span>] <span class="cf">for</span> s <span class="kw">in</span> sums <span class="cf">if</span> s[<span class="dv">1</span>] <span class="op">&lt;</span> attack_needed[<span class="bu">min</span>(s[<span class="dv">2</span>], <span class="dv">7</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-22-wizard-simulator-20xx" class="level1">
<h1><a href="https://adventofcode.com/2015/day/22">Day 22: Wizard Simulator 20XX</a></h1>
<section id="part-1-21" class="level2">
<h2 class="anchored" data-anchor-id="part-1-21">Part 1</h2>
<div class="cell" data-execution_count="43">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> queue</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_effects(effects):</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">tuple</span>([<span class="bu">max</span>(x <span class="op">-</span> <span class="dv">2</span>, <span class="dv">0</span>) <span class="cf">for</span> x <span class="kw">in</span> effects])</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> apply_effects(state, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    own_hp, boss_hp, mana, shield, poison, recharge <span class="op">=</span> state</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (own_hp <span class="op">-</span> (<span class="dv">2</span> <span class="cf">if</span> shield <span class="cf">else</span> <span class="dv">9</span>) <span class="op">-</span> (<span class="dv">1</span> <span class="cf">if</span> part <span class="op">==</span> <span class="dv">2</span> <span class="cf">else</span> <span class="dv">0</span>),</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>            boss_hp <span class="op">-</span> (<span class="dv">6</span> <span class="cf">if</span> poison <span class="cf">else</span> <span class="dv">0</span>),</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>            mana <span class="op">+</span> (<span class="dv">202</span> <span class="cf">if</span> recharge <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">else</span> <span class="dv">101</span> <span class="cf">if</span> recharge <span class="cf">else</span> <span class="dv">0</span>))</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> neighbors(state, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> state[<span class="dv">0</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    new_hp, new_boss_hp, new_mana <span class="op">=</span> apply_effects(state, part<span class="op">=</span>part)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>    new_effects <span class="op">=</span> update_effects(state[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    neighbors <span class="op">=</span> [(<span class="dv">53</span>, (new_hp, new_boss_hp <span class="op">-</span> <span class="dv">4</span>, new_mana <span class="op">-</span> <span class="dv">53</span>) <span class="op">+</span> new_effects),</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>                 (<span class="dv">73</span>, (new_hp <span class="op">+</span> <span class="dv">2</span>, new_boss_hp <span class="op">-</span> <span class="dv">2</span>, new_mana <span class="op">-</span> <span class="dv">73</span>) <span class="op">+</span> new_effects)]</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    costs <span class="op">=</span> [<span class="dv">113</span>, <span class="dv">173</span>, <span class="dv">229</span>]</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    durations <span class="op">=</span> [<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">5</span>]</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (cost, duration) <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">zip</span>(costs, durations)):</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> state[<span class="dv">2</span>] <span class="op">&lt;</span> cost <span class="kw">or</span> new_effects[idx] <span class="op">!=</span> <span class="dv">0</span>:</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>        new_state <span class="op">=</span> <span class="bu">list</span>(state).copy()</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>        new_state[idx <span class="op">+</span> <span class="dv">3</span>] <span class="op">=</span> duration</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>        new_hp, new_boss_hp, new_mana <span class="op">=</span> apply_effects(new_state, part<span class="op">=</span>part)</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>        new_effects <span class="op">=</span> update_effects(new_state[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>        neighbors.append((cost, (new_hp, new_boss_hp, new_mana <span class="op">-</span> cost) <span class="op">+</span> new_effects))</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [neighbor <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors <span class="cf">if</span> neighbor[<span class="dv">1</span>][<span class="dv">2</span>] <span class="op">&gt;=</span> <span class="dv">0</span>]</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>initial_state <span class="op">=</span> (<span class="dv">50</span>, <span class="dv">58</span>, <span class="dv">500</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> PriorityQueue()</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>q.put((<span class="dv">0</span>, initial_state))</span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> q.qsize() <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>    cost, state <span class="op">=</span> q.get()</span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> state[<span class="dv">1</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors(state):</span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>        extra_cost, new_state <span class="op">=</span> neighbor</span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>        q.put((cost <span class="op">+</span> extra_cost, new_state))</span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>cost</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-21" class="level2">
<h2 class="anchored" data-anchor-id="part-2-21">Part 2</h2>
<div class="cell" data-execution_count="44">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>initial_state <span class="op">=</span> (<span class="dv">49</span>, <span class="dv">58</span>, <span class="dv">500</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> PriorityQueue()</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>q.put((<span class="dv">0</span>, initial_state))</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> q.qsize() <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    cost, state <span class="op">=</span> q.get()</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> state[<span class="dv">1</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors(state, part<span class="op">=</span><span class="dv">2</span>):</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>        extra_cost, new_state <span class="op">=</span> neighbor</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>        q.put((cost <span class="op">+</span> extra_cost, new_state))</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>cost</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-23-opening-the-turing-lock" class="level1">
<h1><a href="https://adventofcode.com/2015/day/23">Day 23: Opening the Turing Lock</a></h1>
<section id="part-1-22" class="level2">
<h2 class="anchored" data-anchor-id="part-1-22">Part 1</h2>
<div class="cell" data-execution_count="45">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>arithmetics <span class="op">=</span> {</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"inc"</span>: <span class="kw">lambda</span> x: x <span class="op">+</span> <span class="dv">1</span>,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tpl"</span>: <span class="kw">lambda</span> x: x <span class="op">*</span> <span class="dv">3</span>,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"hlf"</span>: <span class="kw">lambda</span> x: <span class="bu">int</span>(x <span class="op">//</span> <span class="dv">2</span>),</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>jumps <span class="op">=</span> {<span class="st">"jmp"</span>: <span class="kw">lambda</span> x: <span class="va">True</span>, <span class="st">"jie"</span>: <span class="kw">lambda</span> x: (x <span class="op">%</span> <span class="dv">2</span>) <span class="op">==</span> <span class="dv">0</span>, <span class="st">"jio"</span>: <span class="kw">lambda</span> x: x <span class="op">==</span> <span class="dv">1</span>}</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>known_tokens <span class="op">=</span> <span class="bu">list</span>(arithmetics.keys()) <span class="op">+</span> <span class="bu">list</span>(jumps.keys()) <span class="op">+</span> [<span class="st">"a"</span>, <span class="st">"b"</span>]</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [line.replace(<span class="st">","</span>, <span class="st">""</span>).split() <span class="cf">for</span> line <span class="kw">in</span> load(<span class="dv">23</span>)]</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    [token <span class="cf">if</span> token <span class="kw">in</span> known_tokens <span class="cf">else</span> <span class="bu">int</span>(token) <span class="cf">for</span> token <span class="kw">in</span> line] <span class="cf">for</span> line <span class="kw">in</span> data</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(program, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    ip <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    registers <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>    registers[<span class="st">"a"</span>] <span class="op">=</span> <span class="bu">int</span>(part <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> ip <span class="op">&lt;</span> <span class="bu">len</span>(program):</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>        instruction <span class="op">=</span> program[ip]</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> instruction[<span class="dv">0</span>] <span class="kw">in</span> arithmetics:</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>            registers[instruction[<span class="dv">1</span>]] <span class="op">=</span> arithmetics[instruction[<span class="dv">0</span>]](</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>                registers[instruction[<span class="dv">1</span>]]</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> jumps[instruction[<span class="dv">0</span>]](registers[instruction[<span class="dv">1</span>]]):</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>                ip <span class="op">+=</span> instruction[<span class="op">-</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>        ip <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> registers</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>run(data)[<span class="st">"b"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-22" class="level2">
<h2 class="anchored" data-anchor-id="part-2-22">Part 2</h2>
<p>A flag in the “run” function lets us change the relevant register for part 2</p>
<div class="cell" data-execution_count="46">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>run(data, <span class="dv">2</span>)[<span class="st">"b"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-24-it-hangs-in-the-balance" class="level1">
<h1><a href="https://adventofcode.com/2015/day/24">Day 24: It Hangs in the Balance</a></h1>
<section id="part-1-23" class="level2">
<h2 class="anchored" data-anchor-id="part-1-23">Part 1</h2>
<p>Here’s a buggy implementation of part 1. It only looks at the smallest sets that can make the first compartment and completely ignores the others. For the first part that’s semi justifiable, since the amount of small numbers in the input make it very likely that the leftover set can be partitioned into two.</p>
<div class="cell" data-execution_count="47">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">24</span>, <span class="st">"np"</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(splits <span class="op">=</span> <span class="dv">3</span>):</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> data.<span class="bu">sum</span>() <span class="op">/</span> splits</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> combination <span class="kw">in</span> itertools.combinations(data[::<span class="op">-</span><span class="dv">1</span>], i):</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">sum</span>(combination) <span class="op">==</span> target:</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">min</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: np.product(x),</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>                   <span class="bu">filter</span>(<span class="kw">lambda</span> x: <span class="bu">sum</span>(x) <span class="op">==</span> target,</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>                          itertools.combinations(data[::<span class="op">-</span><span class="dv">1</span>], i))))</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>run()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="part-2-23" class="level2">
<h2 class="anchored" data-anchor-id="part-2-23">Part 2</h2>
<p>For the second part, the same cheat works, but is less justifiable, since I don’t actually check that the remaining set can be partitioned into three.</p>
<div class="cell" data-execution_count="48">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>run(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="day-25-let-it-snow" class="level1">
<h1><a href="https://adventofcode.com/2015/day/25">Day 25: Let It Snow</a></h1>
<section id="part-1-24" class="level2">
<h2 class="anchored" data-anchor-id="part-1-24">Part 1</h2>
<div class="cell" data-execution_count="49">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> coordinates_to_n(row, column):</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> row <span class="op">+</span> column</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    complete_triangles <span class="op">=</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">int</span>(complete_triangles) <span class="op">+</span> column</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>row, column <span class="op">=</span> <span class="dv">3010</span>, <span class="dv">3019</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> coordinates_to_n(row, column)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="dv">20151125</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> (s <span class="op">*</span> (<span class="dv">252533</span>)) <span class="op">%</span> <span class="dv">33554393</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb50" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> 2015 Solutions</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># Imports</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> functools</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itertools</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> queue <span class="im">import</span> PriorityQueue</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> more_itertools</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>sys.path.insert(<span class="dv">1</span>, os.path.join(sys.path[<span class="dv">0</span>], <span class="st">".."</span>))</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> utils</span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>load <span class="op">=</span> utils.year_load(<span class="dv">2015</span>)</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 1: Not Quite Lisp](https://adventofcode.com/2015/day/1)</span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> load(<span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>line.count(<span class="st">"("</span>) <span class="op">-</span> line.count(<span class="st">")"</span>)</span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>position <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, character <span class="kw">in</span> <span class="bu">enumerate</span>(line):</span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> position <span class="op">+</span> (<span class="dv">1</span> <span class="cf">if</span> character <span class="op">==</span> <span class="st">"("</span> <span class="cf">else</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> position <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>idx <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 2: I Was Told There Would Be No Math](https://adventofcode.com/2015/day/2)</span></span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-55"><a href="#cb50-55" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-56"><a href="#cb50-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-59"><a href="#cb50-59" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-60"><a href="#cb50-60" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">2</span>)</span>
<span id="cb50-61"><a href="#cb50-61" aria-hidden="true" tabindex="-1"></a>boxes <span class="op">=</span> [[<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> line.split(<span class="st">'x'</span>)] <span class="cf">for</span> line <span class="kw">in</span> data]</span>
<span id="cb50-62"><a href="#cb50-62" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([(<span class="dv">3</span><span class="op">*</span>x<span class="op">*</span>y <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>x<span class="op">*</span>z <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>y<span class="op">*</span>z) <span class="cf">for</span> x,y,z <span class="kw">in</span> <span class="bu">map</span>(<span class="bu">sorted</span>, boxes)])</span>
<span id="cb50-63"><a href="#cb50-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-64"><a href="#cb50-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-65"><a href="#cb50-65" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-66"><a href="#cb50-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-69"><a href="#cb50-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-70"><a href="#cb50-70" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([ x <span class="op">*</span> y <span class="op">*</span> z <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> (x <span class="op">+</span> y) <span class="cf">for</span> x,y,z <span class="kw">in</span> <span class="bu">map</span>(<span class="bu">sorted</span>, boxes)])</span>
<span id="cb50-71"><a href="#cb50-71" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-72"><a href="#cb50-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-73"><a href="#cb50-73" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 3: Perfectly Spherical Houses in a Vacuum](https://adventofcode.com/2015/day/3)</span></span>
<span id="cb50-74"><a href="#cb50-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-75"><a href="#cb50-75" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-76"><a href="#cb50-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-79"><a href="#cb50-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-80"><a href="#cb50-80" aria-hidden="true" tabindex="-1"></a>instructions <span class="op">=</span> load(<span class="dv">3</span>)[<span class="dv">0</span>]</span>
<span id="cb50-81"><a href="#cb50-81" aria-hidden="true" tabindex="-1"></a>commands <span class="op">=</span> {<span class="st">"^"</span>: <span class="kw">lambda</span> x, y: (x, y <span class="op">+</span> <span class="dv">1</span>), <span class="st">"v"</span>: <span class="kw">lambda</span> x, y: (x, y <span class="op">-</span> <span class="dv">1</span>),</span>
<span id="cb50-82"><a href="#cb50-82" aria-hidden="true" tabindex="-1"></a>            <span class="st">"&gt;"</span>: <span class="kw">lambda</span> x, y: (x <span class="op">+</span> <span class="dv">1</span>, y), <span class="st">"&lt;"</span>: <span class="kw">lambda</span> x, y: (x <span class="op">-</span> <span class="dv">1</span>, y),}</span>
<span id="cb50-83"><a href="#cb50-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-84"><a href="#cb50-84" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> execute_instructions(instructions, houses<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb50-85"><a href="#cb50-85" aria-hidden="true" tabindex="-1"></a>    position <span class="op">=</span> <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb50-86"><a href="#cb50-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> houses <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb50-87"><a href="#cb50-87" aria-hidden="true" tabindex="-1"></a>        houses <span class="op">=</span> {(<span class="dv">0</span>, <span class="dv">0</span>): <span class="dv">1</span>}</span>
<span id="cb50-88"><a href="#cb50-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> instruction <span class="kw">in</span> instructions:</span>
<span id="cb50-89"><a href="#cb50-89" aria-hidden="true" tabindex="-1"></a>        position <span class="op">=</span> commands[instruction](<span class="op">*</span>position)</span>
<span id="cb50-90"><a href="#cb50-90" aria-hidden="true" tabindex="-1"></a>        houses[position] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb50-91"><a href="#cb50-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> houses</span>
<span id="cb50-92"><a href="#cb50-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-93"><a href="#cb50-93" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(execute_instructions(instructions))</span>
<span id="cb50-94"><a href="#cb50-94" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-95"><a href="#cb50-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-96"><a href="#cb50-96" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-97"><a href="#cb50-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-100"><a href="#cb50-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-101"><a href="#cb50-101" aria-hidden="true" tabindex="-1"></a>houses <span class="op">=</span> execute_instructions(instructions[::<span class="dv">2</span>])</span>
<span id="cb50-102"><a href="#cb50-102" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(execute_instructions(instructions[<span class="dv">1</span>::<span class="dv">2</span>], houses))</span>
<span id="cb50-103"><a href="#cb50-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-104"><a href="#cb50-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-105"><a href="#cb50-105" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 4: The Ideal Stocking Stuffer](https://adventofcode.com/2015/day/4)</span></span>
<span id="cb50-106"><a href="#cb50-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-107"><a href="#cb50-107" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-108"><a href="#cb50-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-111"><a href="#cb50-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-112"><a href="#cb50-112" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb50-113"><a href="#cb50-113" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> hashlib.md5()</span>
<span id="cb50-114"><a href="#cb50-114" aria-hidden="true" tabindex="-1"></a>prefix <span class="op">=</span> <span class="st">"iwrupvqb"</span></span>
<span id="cb50-115"><a href="#cb50-115" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> brute_force(n):</span>
<span id="cb50-116"><a href="#cb50-116" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-117"><a href="#cb50-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">:=</span> i <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb50-118"><a href="#cb50-118" aria-hidden="true" tabindex="-1"></a>        md5 <span class="op">=</span> hashlib.md5((prefix <span class="op">+</span> <span class="bu">str</span>(i)).encode(encoding<span class="op">=</span><span class="st">"UTF-8"</span>)).hexdigest()</span>
<span id="cb50-119"><a href="#cb50-119" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> md5[:n] <span class="op">==</span> n <span class="op">*</span> <span class="st">"0"</span>:</span>
<span id="cb50-120"><a href="#cb50-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb50-121"><a href="#cb50-121" aria-hidden="true" tabindex="-1"></a>brute_force(<span class="dv">5</span>)</span>
<span id="cb50-122"><a href="#cb50-122" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-123"><a href="#cb50-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-124"><a href="#cb50-124" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-125"><a href="#cb50-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-128"><a href="#cb50-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-129"><a href="#cb50-129" aria-hidden="true" tabindex="-1"></a>brute_force(<span class="dv">6</span>)</span>
<span id="cb50-130"><a href="#cb50-130" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-131"><a href="#cb50-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-132"><a href="#cb50-132" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 5: Doesn't He Have Intern-Elves For This?](https://adventofcode.com/2015/day/5)</span></span>
<span id="cb50-133"><a href="#cb50-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-134"><a href="#cb50-134" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-135"><a href="#cb50-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-138"><a href="#cb50-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-139"><a href="#cb50-139" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_nice(s):</span>
<span id="cb50-140"><a href="#cb50-140" aria-hidden="true" tabindex="-1"></a>    sufficient_vowels <span class="op">=</span> <span class="bu">len</span>(re.findall(<span class="st">"[aeiou]"</span>, s)) <span class="op">&gt;=</span> <span class="dv">3</span></span>
<span id="cb50-141"><a href="#cb50-141" aria-hidden="true" tabindex="-1"></a>    contains_double <span class="op">=</span> (np.array(<span class="bu">list</span>(s))[<span class="dv">1</span>:] <span class="op">==</span> np.roll(<span class="bu">list</span>(s), <span class="dv">1</span>)[<span class="dv">1</span>:]).<span class="bu">any</span>()</span>
<span id="cb50-142"><a href="#cb50-142" aria-hidden="true" tabindex="-1"></a>    contains_forbidden <span class="op">=</span> <span class="bu">any</span>(val <span class="kw">in</span> s <span class="cf">for</span> val <span class="kw">in</span> [<span class="st">"ab"</span>, <span class="st">"cd"</span>, <span class="st">"pq"</span>, <span class="st">"xy"</span>])</span>
<span id="cb50-143"><a href="#cb50-143" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sufficient_vowels <span class="kw">and</span> contains_double <span class="kw">and</span> <span class="kw">not</span> contains_forbidden</span>
<span id="cb50-144"><a href="#cb50-144" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(is_nice(x) <span class="cf">for</span> x <span class="kw">in</span> load(<span class="dv">5</span>))</span>
<span id="cb50-145"><a href="#cb50-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-146"><a href="#cb50-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-147"><a href="#cb50-147" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-148"><a href="#cb50-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-151"><a href="#cb50-151" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-152"><a href="#cb50-152" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_nice(s):</span>
<span id="cb50-153"><a href="#cb50-153" aria-hidden="true" tabindex="-1"></a>    contains_double <span class="op">=</span> (np.array(<span class="bu">list</span>(s))[<span class="dv">2</span>:] <span class="op">==</span> np.roll(<span class="bu">list</span>(s), <span class="dv">2</span>)[<span class="dv">2</span>:]).<span class="bu">any</span>()</span>
<span id="cb50-154"><a href="#cb50-154" aria-hidden="true" tabindex="-1"></a>    contains_double_pair <span class="op">=</span> <span class="bu">bool</span>(re.findall(<span class="st">"(..).*</span><span class="ch">\\</span><span class="st">1"</span>, s))</span>
<span id="cb50-155"><a href="#cb50-155" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> contains_double <span class="kw">and</span> contains_double_pair</span>
<span id="cb50-156"><a href="#cb50-156" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(is_nice(x) <span class="cf">for</span> x <span class="kw">in</span> load(<span class="dv">5</span>))</span>
<span id="cb50-157"><a href="#cb50-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-158"><a href="#cb50-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-159"><a href="#cb50-159" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 6: Probably a Fire Hazard](https://adventofcode.com/2015/day/6)</span></span>
<span id="cb50-160"><a href="#cb50-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-161"><a href="#cb50-161" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-162"><a href="#cb50-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-165"><a href="#cb50-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-166"><a href="#cb50-166" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> load(<span class="dv">6</span>)</span>
<span id="cb50-167"><a href="#cb50-167" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [[<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> re.findall(<span class="st">"\d+"</span>, line)] <span class="cf">for</span> line <span class="kw">in</span> lines]</span>
<span id="cb50-168"><a href="#cb50-168" aria-hidden="true" tabindex="-1"></a>instructions <span class="op">=</span> [line.replace(<span class="st">"turn "</span>, <span class="st">""</span>).split()[<span class="dv">0</span>] <span class="cf">for</span> line <span class="kw">in</span> lines]</span>
<span id="cb50-169"><a href="#cb50-169" aria-hidden="true" tabindex="-1"></a>field <span class="op">=</span> np.zeros([<span class="dv">1000</span>, <span class="dv">1000</span>], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb50-170"><a href="#cb50-170" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x1, y1, x2, y2), instruction <span class="kw">in</span> <span class="bu">zip</span>(numbers, instructions):</span>
<span id="cb50-171"><a href="#cb50-171" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> instruction <span class="op">==</span> <span class="st">"toggle"</span>:</span>
<span id="cb50-172"><a href="#cb50-172" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">^=</span> <span class="dv">1</span></span>
<span id="cb50-173"><a href="#cb50-173" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-174"><a href="#cb50-174" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> <span class="bu">int</span>(instruction <span class="op">==</span> <span class="st">"on"</span>)</span>
<span id="cb50-175"><a href="#cb50-175" aria-hidden="true" tabindex="-1"></a>field.<span class="bu">sum</span>()</span>
<span id="cb50-176"><a href="#cb50-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-177"><a href="#cb50-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-178"><a href="#cb50-178" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-179"><a href="#cb50-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-182"><a href="#cb50-182" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-183"><a href="#cb50-183" aria-hidden="true" tabindex="-1"></a>field <span class="op">=</span> np.zeros([<span class="dv">1000</span>, <span class="dv">1000</span>], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb50-184"><a href="#cb50-184" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x1, y1, x2, y2), instruction <span class="kw">in</span> <span class="bu">zip</span>(numbers, instructions):</span>
<span id="cb50-185"><a href="#cb50-185" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> instruction <span class="op">==</span> <span class="st">"toggle"</span>:</span>
<span id="cb50-186"><a href="#cb50-186" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">+=</span> <span class="dv">2</span></span>
<span id="cb50-187"><a href="#cb50-187" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-188"><a href="#cb50-188" aria-hidden="true" tabindex="-1"></a>        field[x1:x2 <span class="op">+</span> <span class="dv">1</span>, y1:y2 <span class="op">+</span> <span class="dv">1</span>] <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> <span class="bu">int</span>(instruction <span class="op">==</span> <span class="st">"on"</span>) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb50-189"><a href="#cb50-189" aria-hidden="true" tabindex="-1"></a>    field[np.where(field <span class="op">&lt;</span> <span class="dv">0</span>)] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-190"><a href="#cb50-190" aria-hidden="true" tabindex="-1"></a>field.<span class="bu">sum</span>()</span>
<span id="cb50-191"><a href="#cb50-191" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-192"><a href="#cb50-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-193"><a href="#cb50-193" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 7: Some Assembly Required](https://adventofcode.com/2015/day/7)</span></span>
<span id="cb50-194"><a href="#cb50-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-195"><a href="#cb50-195" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-196"><a href="#cb50-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-199"><a href="#cb50-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-200"><a href="#cb50-200" aria-hidden="true" tabindex="-1"></a>circuit <span class="op">=</span> {target: source <span class="cf">for</span> source, target <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x.split(<span class="st">" -&gt; "</span>), load(<span class="dv">7</span>))}</span>
<span id="cb50-201"><a href="#cb50-201" aria-hidden="true" tabindex="-1"></a>binops <span class="op">=</span> {<span class="st">"AND"</span>: <span class="kw">lambda</span> x, y: x <span class="op">&amp;</span> y,</span>
<span id="cb50-202"><a href="#cb50-202" aria-hidden="true" tabindex="-1"></a>          <span class="st">"OR"</span>: <span class="kw">lambda</span> x, y: x <span class="op">|</span> y,</span>
<span id="cb50-203"><a href="#cb50-203" aria-hidden="true" tabindex="-1"></a>          <span class="st">"LSHIFT"</span>: <span class="kw">lambda</span> x, y: x <span class="op">&lt;&lt;</span> y,</span>
<span id="cb50-204"><a href="#cb50-204" aria-hidden="true" tabindex="-1"></a>          <span class="st">"RSHIFT"</span>: <span class="kw">lambda</span> x, y: x <span class="op">&gt;&gt;</span> y}</span>
<span id="cb50-205"><a href="#cb50-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-206"><a href="#cb50-206" aria-hidden="true" tabindex="-1"></a><span class="at">@functools.cache</span></span>
<span id="cb50-207"><a href="#cb50-207" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> evaluate(symbol):</span>
<span id="cb50-208"><a href="#cb50-208" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb50-209"><a href="#cb50-209" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">int</span>(symbol)</span>
<span id="cb50-210"><a href="#cb50-210" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb50-211"><a href="#cb50-211" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb50-212"><a href="#cb50-212" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb50-213"><a href="#cb50-213" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> circuit[symbol].split()</span>
<span id="cb50-214"><a href="#cb50-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(operation) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb50-215"><a href="#cb50-215" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> evaluate(operation[<span class="dv">0</span>])</span>
<span id="cb50-216"><a href="#cb50-216" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(operation) <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb50-217"><a href="#cb50-217" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> evaluate(operation[<span class="dv">1</span>]) <span class="op">^</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">16</span> <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb50-218"><a href="#cb50-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-219"><a href="#cb50-219" aria-hidden="true" tabindex="-1"></a>        arg1, op, arg2 <span class="op">=</span> operation</span>
<span id="cb50-220"><a href="#cb50-220" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> binops[op](evaluate(arg1), evaluate(arg2))</span>
<span id="cb50-221"><a href="#cb50-221" aria-hidden="true" tabindex="-1"></a>evaluate(<span class="st">"a"</span>)</span>
<span id="cb50-222"><a href="#cb50-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-223"><a href="#cb50-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-224"><a href="#cb50-224" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-225"><a href="#cb50-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-226"><a href="#cb50-226" aria-hidden="true" tabindex="-1"></a>We can reset everything by clearing out the cache, and setting a wire to a specific value (or expression) can be accomplished by modifying the circuit.</span>
<span id="cb50-227"><a href="#cb50-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-228"><a href="#cb50-228" aria-hidden="true" tabindex="-1"></a>That gives</span>
<span id="cb50-229"><a href="#cb50-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-232"><a href="#cb50-232" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-233"><a href="#cb50-233" aria-hidden="true" tabindex="-1"></a>evaluate.cache_clear()</span>
<span id="cb50-234"><a href="#cb50-234" aria-hidden="true" tabindex="-1"></a>circuit[<span class="st">"b"</span>] <span class="op">=</span> <span class="bu">str</span>(evaluate(<span class="st">"a"</span>))</span>
<span id="cb50-235"><a href="#cb50-235" aria-hidden="true" tabindex="-1"></a>evaluate(<span class="st">"a"</span>)</span>
<span id="cb50-236"><a href="#cb50-236" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-237"><a href="#cb50-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-238"><a href="#cb50-238" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 8: Matchsticks](https://adventofcode.com/2015/day/8)</span></span>
<span id="cb50-239"><a href="#cb50-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-240"><a href="#cb50-240" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-241"><a href="#cb50-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-244"><a href="#cb50-244" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-245"><a href="#cb50-245" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> [x[:<span class="op">-</span><span class="dv">1</span>] <span class="cf">for</span> x load(<span class="dv">8</span>)]</span>
<span id="cb50-246"><a href="#cb50-246" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="bu">len</span>(line) <span class="op">-</span> <span class="bu">len</span>(<span class="bu">eval</span>(line)) <span class="cf">for</span> line <span class="kw">in</span> lines)</span>
<span id="cb50-247"><a href="#cb50-247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-248"><a href="#cb50-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-249"><a href="#cb50-249" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-250"><a href="#cb50-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-253"><a href="#cb50-253" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-254"><a href="#cb50-254" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="dv">2</span> <span class="op">+</span> <span class="bu">len</span>([x <span class="cf">for</span> x <span class="kw">in</span> line <span class="cf">if</span> x <span class="kw">in</span> [<span class="st">"</span><span class="ch">\"</span><span class="st">"</span>, <span class="st">"</span><span class="ch">\\</span><span class="st">"</span>]]) <span class="cf">for</span> line <span class="kw">in</span> lines)</span>
<span id="cb50-255"><a href="#cb50-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-256"><a href="#cb50-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-257"><a href="#cb50-257" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 9: All in a Single Night](https://adventofcode.com/2015/day/9)</span></span>
<span id="cb50-258"><a href="#cb50-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-259"><a href="#cb50-259" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-260"><a href="#cb50-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-263"><a href="#cb50-263" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-264"><a href="#cb50-264" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> {}</span>
<span id="cb50-265"><a href="#cb50-265" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [x.split() <span class="cf">for</span> x <span class="kw">in</span> load(<span class="dv">9</span>)]</span>
<span id="cb50-266"><a href="#cb50-266" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> source, _, destination, __, distance <span class="kw">in</span> data:</span>
<span id="cb50-267"><a href="#cb50-267" aria-hidden="true" tabindex="-1"></a>    d[(source, destination)] <span class="op">=</span> <span class="bu">int</span>(distance)</span>
<span id="cb50-268"><a href="#cb50-268" aria-hidden="true" tabindex="-1"></a>    d[(destination, source)] <span class="op">=</span> <span class="bu">int</span>(distance)</span>
<span id="cb50-269"><a href="#cb50-269" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> <span class="bu">set</span>(x[<span class="dv">0</span>] <span class="cf">for</span> x <span class="kw">in</span> d.keys())</span>
<span id="cb50-270"><a href="#cb50-270" aria-hidden="true" tabindex="-1"></a>tours <span class="op">=</span> [<span class="bu">sum</span>(d[route[start], route[start <span class="op">+</span> <span class="dv">1</span>]] <span class="cf">for</span> start <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities) <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="cb50-271"><a href="#cb50-271" aria-hidden="true" tabindex="-1"></a>         <span class="cf">for</span> route <span class="kw">in</span> itertools.permutations(cities)]</span>
<span id="cb50-272"><a href="#cb50-272" aria-hidden="true" tabindex="-1"></a><span class="bu">min</span>(tours)</span>
<span id="cb50-273"><a href="#cb50-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-274"><a href="#cb50-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-275"><a href="#cb50-275" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-276"><a href="#cb50-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-279"><a href="#cb50-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-280"><a href="#cb50-280" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(tours)</span>
<span id="cb50-281"><a href="#cb50-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-282"><a href="#cb50-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-283"><a href="#cb50-283" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 10: Elves Look, Elves Say](https://adventofcode.com/2015/day/10)</span></span>
<span id="cb50-284"><a href="#cb50-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-285"><a href="#cb50-285" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-286"><a href="#cb50-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-289"><a href="#cb50-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-290"><a href="#cb50-290" aria-hidden="true" tabindex="-1"></a>message <span class="op">=</span> <span class="st">"3113322113"</span></span>
<span id="cb50-291"><a href="#cb50-291" aria-hidden="true" tabindex="-1"></a>regex <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"(([123])\2*)"</span>)</span>
<span id="cb50-292"><a href="#cb50-292" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">40</span>):</span>
<span id="cb50-293"><a href="#cb50-293" aria-hidden="true" tabindex="-1"></a>    runs <span class="op">=</span> re.findall(regex, message)</span>
<span id="cb50-294"><a href="#cb50-294" aria-hidden="true" tabindex="-1"></a>    message <span class="op">=</span> <span class="st">''</span>.join([<span class="bu">str</span>(<span class="bu">len</span>(run)) <span class="op">+</span> run[<span class="dv">0</span>] <span class="cf">for</span> run <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x[<span class="dv">0</span>], runs)])</span>
<span id="cb50-295"><a href="#cb50-295" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(message)</span>
<span id="cb50-296"><a href="#cb50-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-297"><a href="#cb50-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-298"><a href="#cb50-298" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-299"><a href="#cb50-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-302"><a href="#cb50-302" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-303"><a href="#cb50-303" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb50-304"><a href="#cb50-304" aria-hidden="true" tabindex="-1"></a>    runs <span class="op">=</span> re.findall(regex, message)</span>
<span id="cb50-305"><a href="#cb50-305" aria-hidden="true" tabindex="-1"></a>    message <span class="op">=</span> <span class="st">''</span>.join([<span class="bu">str</span>(<span class="bu">len</span>(run)) <span class="op">+</span> run[<span class="dv">0</span>] <span class="cf">for</span> run <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x[<span class="dv">0</span>], runs)])</span>
<span id="cb50-306"><a href="#cb50-306" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(message)</span>
<span id="cb50-307"><a href="#cb50-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-308"><a href="#cb50-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-309"><a href="#cb50-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-310"><a href="#cb50-310" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 11: Corporate Policy](https://adventofcode.com/2015/day/11)</span></span>
<span id="cb50-311"><a href="#cb50-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-312"><a href="#cb50-312" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-313"><a href="#cb50-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-314"><a href="#cb50-314" aria-hidden="true" tabindex="-1"></a>So there are two jobs here:</span>
<span id="cb50-315"><a href="#cb50-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-316"><a href="#cb50-316" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Determine whether a candidate password is valid</span>
<span id="cb50-317"><a href="#cb50-317" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Iterate over candidate passwords in order, starting with the puzzle input</span>
<span id="cb50-318"><a href="#cb50-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-319"><a href="#cb50-319" aria-hidden="true" tabindex="-1"></a>Is valid is not too difficult to accomplish. The "straight" condition can be rewritten as "1, 1" appears somewhere in the list of differences between neighboring characters. The "double pair" condition can be shortly expressed as matching a simple regex. Forbidding certain characters outright is most easily accomplished by never generating them as candidates</span>
<span id="cb50-320"><a href="#cb50-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-321"><a href="#cb50-321" aria-hidden="true" tabindex="-1"></a>To iterate over candidate passwords, we first construct a helper method to iterate over candidate passwords that keep some prefix string fixed. The full iterator is then a chain over all these with successively shorter prefix strings.</span>
<span id="cb50-322"><a href="#cb50-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-325"><a href="#cb50-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-326"><a href="#cb50-326" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> has_straight(password):</span>
<span id="cb50-327"><a href="#cb50-327" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(password, <span class="bu">str</span>):</span>
<span id="cb50-328"><a href="#cb50-328" aria-hidden="true" tabindex="-1"></a>        password <span class="op">=</span> np.array([<span class="bu">ord</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb50-329"><a href="#cb50-329" aria-hidden="true" tabindex="-1"></a>    differences <span class="op">=</span> np.diff(password)</span>
<span id="cb50-330"><a href="#cb50-330" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">1</span>, <span class="dv">1</span>) <span class="kw">in</span> <span class="bu">zip</span>(differences, differences[<span class="dv">1</span>:])</span>
<span id="cb50-331"><a href="#cb50-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-332"><a href="#cb50-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-333"><a href="#cb50-333" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"(.)\1.*(.)\2"</span>)</span>
<span id="cb50-334"><a href="#cb50-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-335"><a href="#cb50-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-336"><a href="#cb50-336" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> has_double_pair(password):</span>
<span id="cb50-337"><a href="#cb50-337" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">bool</span>(re.search(r, <span class="st">""</span>.join(<span class="bu">chr</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password)))</span>
<span id="cb50-338"><a href="#cb50-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-339"><a href="#cb50-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-340"><a href="#cb50-340" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_valid_password(password):</span>
<span id="cb50-341"><a href="#cb50-341" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> has_double_pair(password) <span class="kw">and</span> has_straight(password)</span>
<span id="cb50-342"><a href="#cb50-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-343"><a href="#cb50-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-344"><a href="#cb50-344" aria-hidden="true" tabindex="-1"></a>puzzle_input <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">ord</span>(x) <span class="cf">for</span> x <span class="kw">in</span> <span class="st">"hxbxwxba"</span>)</span>
<span id="cb50-345"><a href="#cb50-345" aria-hidden="true" tabindex="-1"></a>password <span class="op">=</span> puzzle_input</span>
<span id="cb50-346"><a href="#cb50-346" aria-hidden="true" tabindex="-1"></a>characters <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">ord</span>(x) <span class="cf">for</span> x <span class="kw">in</span> <span class="st">"abcdefghjkmnpqrstuvwxyz"</span>)</span>
<span id="cb50-347"><a href="#cb50-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-348"><a href="#cb50-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-349"><a href="#cb50-349" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iterate(string, prefix_length):</span>
<span id="cb50-350"><a href="#cb50-350" aria-hidden="true" tabindex="-1"></a>    n_free <span class="op">=</span> <span class="bu">len</span>(string) <span class="op">-</span> prefix_length <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb50-351"><a href="#cb50-351" aria-hidden="true" tabindex="-1"></a>    first <span class="op">=</span> characters[characters.index(string[prefix_length]) <span class="op">+</span> <span class="dv">1</span> :]</span>
<span id="cb50-352"><a href="#cb50-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-353"><a href="#cb50-353" aria-hidden="true" tabindex="-1"></a>    suffixes <span class="op">=</span> itertools.product(first, <span class="op">*</span>([characters] <span class="op">*</span> n_free))</span>
<span id="cb50-354"><a href="#cb50-354" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> suffix <span class="kw">in</span> suffixes:</span>
<span id="cb50-355"><a href="#cb50-355" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> string[:prefix_length] <span class="op">+</span> suffix</span>
<span id="cb50-356"><a href="#cb50-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-357"><a href="#cb50-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-358"><a href="#cb50-358" aria-hidden="true" tabindex="-1"></a>password_iterator <span class="op">=</span> itertools.chain.from_iterable(</span>
<span id="cb50-359"><a href="#cb50-359" aria-hidden="true" tabindex="-1"></a>    [iterate(password, l) <span class="cf">for</span> l <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(password))][::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb50-360"><a href="#cb50-360" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-361"><a href="#cb50-361" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> is_valid_password(password):</span>
<span id="cb50-362"><a href="#cb50-362" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="bu">next</span>(password_iterator)</span>
<span id="cb50-363"><a href="#cb50-363" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>.join(<span class="bu">chr</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password))</span>
<span id="cb50-364"><a href="#cb50-364" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-365"><a href="#cb50-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-366"><a href="#cb50-366" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-367"><a href="#cb50-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-370"><a href="#cb50-370" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-371"><a href="#cb50-371" aria-hidden="true" tabindex="-1"></a>password <span class="op">=</span> <span class="bu">next</span>(password_iterator)</span>
<span id="cb50-372"><a href="#cb50-372" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> is_valid_password(password):</span>
<span id="cb50-373"><a href="#cb50-373" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="bu">next</span>(password_iterator)</span>
<span id="cb50-374"><a href="#cb50-374" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>.join(<span class="bu">chr</span>(x) <span class="cf">for</span> x <span class="kw">in</span> password))</span>
<span id="cb50-375"><a href="#cb50-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-376"><a href="#cb50-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-377"><a href="#cb50-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-378"><a href="#cb50-378" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 12: JSAbacusFramework.io](https://adventofcode.com/2015/day/12)</span></span>
<span id="cb50-379"><a href="#cb50-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-380"><a href="#cb50-380" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-381"><a href="#cb50-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-382"><a href="#cb50-382" aria-hidden="true" tabindex="-1"></a>For the first part, we've been promised that integers only appear as integers. So there's no reason to try and read in the json properly - a simple regex does the trick</span>
<span id="cb50-383"><a href="#cb50-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-386"><a href="#cb50-386" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-387"><a href="#cb50-387" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> load(<span class="dv">12</span>, <span class="st">"int"</span>)</span>
<span id="cb50-388"><a href="#cb50-388" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>([n <span class="cf">for</span> line <span class="kw">in</span> s <span class="cf">for</span> n <span class="kw">in</span> line])</span>
<span id="cb50-389"><a href="#cb50-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-390"><a href="#cb50-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-391"><a href="#cb50-391" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-392"><a href="#cb50-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-393"><a href="#cb50-393" aria-hidden="true" tabindex="-1"></a>That approach obviously doesn't work for the second part, so we'll need a json library</span>
<span id="cb50-394"><a href="#cb50-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-397"><a href="#cb50-397" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-398"><a href="#cb50-398" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb50-399"><a href="#cb50-399" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> json.loads(load(<span class="dv">12</span>, <span class="st">"raw"</span>))</span>
<span id="cb50-400"><a href="#cb50-400" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_value(structure):</span>
<span id="cb50-401"><a href="#cb50-401" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(structure, <span class="bu">str</span>):</span>
<span id="cb50-402"><a href="#cb50-402" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb50-403"><a href="#cb50-403" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(structure, <span class="bu">int</span>):</span>
<span id="cb50-404"><a href="#cb50-404" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> structure</span>
<span id="cb50-405"><a href="#cb50-405" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(structure, <span class="bu">list</span>):</span>
<span id="cb50-406"><a href="#cb50-406" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="bu">sum</span>(find_value(x) <span class="cf">for</span> x <span class="kw">in</span> structure))</span>
<span id="cb50-407"><a href="#cb50-407" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"red"</span> <span class="kw">in</span> structure.values():</span>
<span id="cb50-408"><a href="#cb50-408" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb50-409"><a href="#cb50-409" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(find_value(x) <span class="cf">for</span> x <span class="kw">in</span> structure.values())</span>
<span id="cb50-410"><a href="#cb50-410" aria-hidden="true" tabindex="-1"></a>find_value(s)</span>
<span id="cb50-411"><a href="#cb50-411" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-412"><a href="#cb50-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-413"><a href="#cb50-413" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 13: Knights of the Dinner Table](https://adventofcode.com/2015/day/13)</span></span>
<span id="cb50-414"><a href="#cb50-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-415"><a href="#cb50-415" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-416"><a href="#cb50-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-419"><a href="#cb50-419" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-420"><a href="#cb50-420" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">13</span>)</span>
<span id="cb50-421"><a href="#cb50-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-422"><a href="#cb50-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-423"><a href="#cb50-423" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse(line):</span>
<span id="cb50-424"><a href="#cb50-424" aria-hidden="true" tabindex="-1"></a>    words <span class="op">=</span> line.split()</span>
<span id="cb50-425"><a href="#cb50-425" aria-hidden="true" tabindex="-1"></a>    people <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">sorted</span>([words[<span class="dv">0</span>], words[<span class="op">-</span><span class="dv">1</span>][:<span class="op">-</span><span class="dv">1</span>]]))</span>
<span id="cb50-426"><a href="#cb50-426" aria-hidden="true" tabindex="-1"></a>    amount <span class="op">=</span> <span class="bu">int</span>(re.search(<span class="st">"(\d+)"</span>, line).groups(<span class="dv">0</span>)[<span class="dv">0</span>])</span>
<span id="cb50-427"><a href="#cb50-427" aria-hidden="true" tabindex="-1"></a>    sign <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> (<span class="st">"gain"</span> <span class="kw">in</span> words) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb50-428"><a href="#cb50-428" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> people, amount <span class="op">*</span> sign</span>
<span id="cb50-429"><a href="#cb50-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-430"><a href="#cb50-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-431"><a href="#cb50-431" aria-hidden="true" tabindex="-1"></a>scores <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb50-432"><a href="#cb50-432" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> load(<span class="dv">13</span>):</span>
<span id="cb50-433"><a href="#cb50-433" aria-hidden="true" tabindex="-1"></a>    people, score <span class="op">=</span> parse(line)</span>
<span id="cb50-434"><a href="#cb50-434" aria-hidden="true" tabindex="-1"></a>    scores[people] <span class="op">+=</span> score</span>
<span id="cb50-435"><a href="#cb50-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-436"><a href="#cb50-436" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> <span class="bu">sorted</span>(<span class="bu">set</span>([person <span class="cf">for</span> pair <span class="kw">in</span> scores.keys() <span class="cf">for</span> person <span class="kw">in</span> pair]))</span>
<span id="cb50-437"><a href="#cb50-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-438"><a href="#cb50-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-439"><a href="#cb50-439" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_score(permutation):</span>
<span id="cb50-440"><a href="#cb50-440" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-441"><a href="#cb50-441" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(permutation)</span>
<span id="cb50-442"><a href="#cb50-442" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb50-443"><a href="#cb50-443" aria-hidden="true" tabindex="-1"></a>        score <span class="op">+=</span> scores[<span class="bu">tuple</span>(<span class="bu">sorted</span>([permutation[i], permutation[(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> n]]))]</span>
<span id="cb50-444"><a href="#cb50-444" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score</span>
<span id="cb50-445"><a href="#cb50-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-446"><a href="#cb50-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-447"><a href="#cb50-447" aria-hidden="true" tabindex="-1"></a>maxval <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-448"><a href="#cb50-448" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> permutation <span class="kw">in</span> itertools.permutations(people[<span class="dv">1</span>:]):</span>
<span id="cb50-449"><a href="#cb50-449" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> calculate_score((people[<span class="dv">0</span>],) <span class="op">+</span> permutation)</span>
<span id="cb50-450"><a href="#cb50-450" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> score <span class="op">&gt;</span> maxval:</span>
<span id="cb50-451"><a href="#cb50-451" aria-hidden="true" tabindex="-1"></a>        maxval <span class="op">=</span> score</span>
<span id="cb50-452"><a href="#cb50-452" aria-hidden="true" tabindex="-1"></a>maxval</span>
<span id="cb50-453"><a href="#cb50-453" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-454"><a href="#cb50-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-455"><a href="#cb50-455" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-456"><a href="#cb50-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-457"><a href="#cb50-457" aria-hidden="true" tabindex="-1"></a>Here we see the magic of the defaultdict - since all of the pairs involving "You" have a net score of zero, we don't need to change the scoring dictionary at all. We just add "You" to the people we are permuting over, and run everything exactly as before.</span>
<span id="cb50-458"><a href="#cb50-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-461"><a href="#cb50-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-462"><a href="#cb50-462" aria-hidden="true" tabindex="-1"></a>maxval <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-463"><a href="#cb50-463" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> permutation <span class="kw">in</span> itertools.permutations(people[<span class="dv">1</span>:] <span class="op">+</span> [<span class="st">"You"</span>]):</span>
<span id="cb50-464"><a href="#cb50-464" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> calculate_score((people[<span class="dv">0</span>],) <span class="op">+</span> permutation)</span>
<span id="cb50-465"><a href="#cb50-465" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> score <span class="op">&gt;</span> maxval:</span>
<span id="cb50-466"><a href="#cb50-466" aria-hidden="true" tabindex="-1"></a>        maxval <span class="op">=</span> score</span>
<span id="cb50-467"><a href="#cb50-467" aria-hidden="true" tabindex="-1"></a>maxval</span>
<span id="cb50-468"><a href="#cb50-468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-469"><a href="#cb50-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-470"><a href="#cb50-470" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 14: Reindeer Olympics](https://adventofcode.com/2015/day/14)</span></span>
<span id="cb50-471"><a href="#cb50-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-472"><a href="#cb50-472" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-473"><a href="#cb50-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-476"><a href="#cb50-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-477"><a href="#cb50-477" aria-hidden="true" tabindex="-1"></a>reindeer <span class="op">=</span> load(<span class="dv">14</span>, <span class="st">"int"</span>)</span>
<span id="cb50-478"><a href="#cb50-478" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> score(time, speed, on, off):</span>
<span id="cb50-479"><a href="#cb50-479" aria-hidden="true" tabindex="-1"></a>    cycle_length <span class="op">=</span> on <span class="op">+</span> off</span>
<span id="cb50-480"><a href="#cb50-480" aria-hidden="true" tabindex="-1"></a>    n_cycles <span class="op">=</span> time <span class="op">//</span> (cycle_length)</span>
<span id="cb50-481"><a href="#cb50-481" aria-hidden="true" tabindex="-1"></a>    offset <span class="op">=</span> <span class="bu">min</span>(on, n_cycles <span class="op">%</span> cycle_length)</span>
<span id="cb50-482"><a href="#cb50-482" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> speed <span class="op">*</span> (n_cycles <span class="op">*</span> on <span class="op">+</span> offset)</span>
<span id="cb50-483"><a href="#cb50-483" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: score(<span class="dv">2503</span>, <span class="op">*</span>x), reindeer))</span>
<span id="cb50-484"><a href="#cb50-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-485"><a href="#cb50-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-486"><a href="#cb50-486" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-487"><a href="#cb50-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-490"><a href="#cb50-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-491"><a href="#cb50-491" aria-hidden="true" tabindex="-1"></a>wins <span class="op">=</span> np.zeros(<span class="bu">len</span>(numbers))</span>
<span id="cb50-492"><a href="#cb50-492" aria-hidden="true" tabindex="-1"></a>positions <span class="op">=</span> np.zeros(<span class="bu">len</span>(numbers))</span>
<span id="cb50-493"><a href="#cb50-493" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2503</span>):</span>
<span id="cb50-494"><a href="#cb50-494" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (speed, on, off) <span class="kw">in</span> <span class="bu">enumerate</span>(reindeer):</span>
<span id="cb50-495"><a href="#cb50-495" aria-hidden="true" tabindex="-1"></a>        cycle_length <span class="op">=</span> on <span class="op">+</span> off</span>
<span id="cb50-496"><a href="#cb50-496" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">%</span> cycle_length <span class="op">&lt;</span> on:</span>
<span id="cb50-497"><a href="#cb50-497" aria-hidden="true" tabindex="-1"></a>            positions[idx] <span class="op">+=</span> speed</span>
<span id="cb50-498"><a href="#cb50-498" aria-hidden="true" tabindex="-1"></a>    wins <span class="op">+=</span> (positions <span class="op">==</span> <span class="bu">max</span>(positions))</span>
<span id="cb50-499"><a href="#cb50-499" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(wins)</span>
<span id="cb50-500"><a href="#cb50-500" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-501"><a href="#cb50-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-502"><a href="#cb50-502" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 15: Science for Hungry People](https://adventofcode.com/2015/day/15)</span></span>
<span id="cb50-503"><a href="#cb50-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-504"><a href="#cb50-504" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-505"><a href="#cb50-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-506"><a href="#cb50-506" aria-hidden="true" tabindex="-1"></a>Since each of the values has to be positive, we can derive some constraints on how much of each ingredient we can use. We know there are 100 of each in total, so letting the four variables be $w, x, y, z$, we have $w + x + y + z = 100$. Additionally, since only one ingredient contributes a positive value to any given quantitity we have to use at least one of each. With that out of the way we can use the matrix to set up the following system of inequalities:</span>
<span id="cb50-507"><a href="#cb50-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-508"><a href="#cb50-508" aria-hidden="true" tabindex="-1"></a><span class="in">```{=latex}</span></span>
<span id="cb50-509"><a href="#cb50-509" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align*}</span></span>
<span id="cb50-510"><a href="#cb50-510" aria-hidden="true" tabindex="-1"></a><span class="in"> 3w - 3x - y &amp;&gt; 0 \\</span></span>
<span id="cb50-511"><a href="#cb50-511" aria-hidden="true" tabindex="-1"></a><span class="in"> 4y - 3z &amp;&gt; 0 \\</span></span>
<span id="cb50-512"><a href="#cb50-512" aria-hidden="true" tabindex="-1"></a><span class="in"> -3w + 2z &amp;&gt; 0</span></span>
<span id="cb50-513"><a href="#cb50-513" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align*}</span></span>
<span id="cb50-514"><a href="#cb50-514" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-515"><a href="#cb50-515" aria-hidden="true" tabindex="-1"></a>From that we can derive the following bounds for the amount of each ingredient</span>
<span id="cb50-516"><a href="#cb50-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-517"><a href="#cb50-517" aria-hidden="true" tabindex="-1"></a><span class="in">```{=latex}</span></span>
<span id="cb50-518"><a href="#cb50-518" aria-hidden="true" tabindex="-1"></a><span class="in">\begin{align*}</span></span>
<span id="cb50-519"><a href="#cb50-519" aria-hidden="true" tabindex="-1"></a><span class="in">1 &amp;\leq w\leq 39\\</span></span>
<span id="cb50-520"><a href="#cb50-520" aria-hidden="true" tabindex="-1"></a><span class="in">1 &amp;\leq x\leq 39\\</span></span>
<span id="cb50-521"><a href="#cb50-521" aria-hidden="true" tabindex="-1"></a><span class="in">1 &amp;\leq y\leq 72\\</span></span>
<span id="cb50-522"><a href="#cb50-522" aria-hidden="true" tabindex="-1"></a><span class="in">1 &amp;\leq z\leq 65</span></span>
<span id="cb50-523"><a href="#cb50-523" aria-hidden="true" tabindex="-1"></a><span class="in">\end{align*}</span></span>
<span id="cb50-524"><a href="#cb50-524" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-525"><a href="#cb50-525" aria-hidden="true" tabindex="-1"></a>For example, the upper bound on $w$ follows from the last inequality, which implies that $z &gt; 1.5 w$. The one on $x$ comes from the first inequality, which implies that $x &lt; w$.</span>
<span id="cb50-526"><a href="#cb50-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-527"><a href="#cb50-527" aria-hidden="true" tabindex="-1"></a>The last thing to consider is that once three of the values are fixed, the fourth is known. Together, these optimizations let us reduce the cases we have to consider from 1 million to less than 50k.</span>
<span id="cb50-528"><a href="#cb50-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-531"><a href="#cb50-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-532"><a href="#cb50-532" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.array(load(<span class="dv">15</span>, <span class="st">"int"</span>)).T</span>
<span id="cb50-533"><a href="#cb50-533" aria-hidden="true" tabindex="-1"></a>initial_bounds <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">39</span> <span class="op">+</span> <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">39</span> <span class="op">+</span> <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">72</span> <span class="op">+</span> <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">65</span> <span class="op">+</span> <span class="dv">1</span>]]</span>
<span id="cb50-534"><a href="#cb50-534" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate(part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb50-535"><a href="#cb50-535" aria-hidden="true" tabindex="-1"></a>    maxval <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-536"><a href="#cb50-536" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> w <span class="kw">in</span> <span class="bu">range</span>(<span class="op">*</span>initial_bounds[<span class="dv">0</span>]):</span>
<span id="cb50-537"><a href="#cb50-537" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, w):</span>
<span id="cb50-538"><a href="#cb50-538" aria-hidden="true" tabindex="-1"></a>            left, right <span class="op">=</span> initial_bounds[<span class="dv">2</span>]</span>
<span id="cb50-539"><a href="#cb50-539" aria-hidden="true" tabindex="-1"></a>            new_y <span class="op">=</span> <span class="dv">3</span> <span class="op">*</span> (w <span class="op">-</span> x)</span>
<span id="cb50-540"><a href="#cb50-540" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(left, <span class="bu">min</span>(right, new_y)):</span>
<span id="cb50-541"><a href="#cb50-541" aria-hidden="true" tabindex="-1"></a>                z <span class="op">=</span> <span class="dv">100</span> <span class="op">-</span> x <span class="op">-</span> y <span class="op">-</span> w</span>
<span id="cb50-542"><a href="#cb50-542" aria-hidden="true" tabindex="-1"></a>                score <span class="op">=</span> (data <span class="op">@</span> (w, x, y, z))</span>
<span id="cb50-543"><a href="#cb50-543" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (score <span class="op">&lt;=</span> <span class="dv">0</span>).<span class="bu">any</span>() <span class="kw">or</span> (part <span class="op">==</span> <span class="dv">2</span> <span class="kw">and</span> (score[<span class="op">-</span><span class="dv">1</span>] <span class="op">!=</span> <span class="dv">500</span>)):</span>
<span id="cb50-544"><a href="#cb50-544" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">continue</span></span>
<span id="cb50-545"><a href="#cb50-545" aria-hidden="true" tabindex="-1"></a>                val <span class="op">=</span> np.product(score[:<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb50-546"><a href="#cb50-546" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> val <span class="op">&gt;</span> maxval:</span>
<span id="cb50-547"><a href="#cb50-547" aria-hidden="true" tabindex="-1"></a>                    maxval <span class="op">=</span> val</span>
<span id="cb50-548"><a href="#cb50-548" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> maxval</span>
<span id="cb50-549"><a href="#cb50-549" aria-hidden="true" tabindex="-1"></a>calculate()</span>
<span id="cb50-550"><a href="#cb50-550" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-551"><a href="#cb50-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-552"><a href="#cb50-552" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-553"><a href="#cb50-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-556"><a href="#cb50-556" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-557"><a href="#cb50-557" aria-hidden="true" tabindex="-1"></a>calculate(<span class="dv">2</span>)</span>
<span id="cb50-558"><a href="#cb50-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-559"><a href="#cb50-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-560"><a href="#cb50-560" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 16: Aunt Sue](https://adventofcode.com/2015/day/16)</span></span>
<span id="cb50-561"><a href="#cb50-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-562"><a href="#cb50-562" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-563"><a href="#cb50-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-566"><a href="#cb50-566" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-567"><a href="#cb50-567" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">16</span>)</span>
<span id="cb50-568"><a href="#cb50-568" aria-hidden="true" tabindex="-1"></a>sues <span class="op">=</span> {}</span>
<span id="cb50-569"><a href="#cb50-569" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> data:</span>
<span id="cb50-570"><a href="#cb50-570" aria-hidden="true" tabindex="-1"></a>    sep <span class="op">=</span> line.index(<span class="st">":"</span>)</span>
<span id="cb50-571"><a href="#cb50-571" aria-hidden="true" tabindex="-1"></a>    sue, info <span class="op">=</span> line[:sep], line[sep <span class="op">+</span> <span class="dv">1</span> :]</span>
<span id="cb50-572"><a href="#cb50-572" aria-hidden="true" tabindex="-1"></a>    sues[<span class="bu">int</span>(sue.split()[<span class="dv">1</span>])] <span class="op">=</span> {</span>
<span id="cb50-573"><a href="#cb50-573" aria-hidden="true" tabindex="-1"></a>        k: <span class="bu">int</span>(v) <span class="cf">for</span> k, v <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x.split(<span class="st">": "</span>), info.split(<span class="st">", "</span>))</span>
<span id="cb50-574"><a href="#cb50-574" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb50-575"><a href="#cb50-575" aria-hidden="true" tabindex="-1"></a>match <span class="op">=</span> {</span>
<span id="cb50-576"><a href="#cb50-576" aria-hidden="true" tabindex="-1"></a>    <span class="st">"children"</span>: <span class="dv">3</span>,</span>
<span id="cb50-577"><a href="#cb50-577" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cats"</span>: <span class="dv">7</span>,</span>
<span id="cb50-578"><a href="#cb50-578" aria-hidden="true" tabindex="-1"></a>    <span class="st">"samoyeds"</span>: <span class="dv">2</span>,</span>
<span id="cb50-579"><a href="#cb50-579" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pomeranians"</span>: <span class="dv">3</span>,</span>
<span id="cb50-580"><a href="#cb50-580" aria-hidden="true" tabindex="-1"></a>    <span class="st">"akitas"</span>: <span class="dv">0</span>,</span>
<span id="cb50-581"><a href="#cb50-581" aria-hidden="true" tabindex="-1"></a>    <span class="st">"vizslas"</span>: <span class="dv">0</span>,</span>
<span id="cb50-582"><a href="#cb50-582" aria-hidden="true" tabindex="-1"></a>    <span class="st">"goldfish"</span>: <span class="dv">5</span>,</span>
<span id="cb50-583"><a href="#cb50-583" aria-hidden="true" tabindex="-1"></a>    <span class="st">"trees"</span>: <span class="dv">3</span>,</span>
<span id="cb50-584"><a href="#cb50-584" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cars"</span>: <span class="dv">2</span>,</span>
<span id="cb50-585"><a href="#cb50-585" aria-hidden="true" tabindex="-1"></a>    <span class="st">"perfumes"</span>: <span class="dv">1</span>,</span>
<span id="cb50-586"><a href="#cb50-586" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-587"><a href="#cb50-587" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sue <span class="kw">in</span> sues:</span>
<span id="cb50-588"><a href="#cb50-588" aria-hidden="true" tabindex="-1"></a>    comparison <span class="op">=</span> sues[sue]</span>
<span id="cb50-589"><a href="#cb50-589" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> match:</span>
<span id="cb50-590"><a href="#cb50-590" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">not</span> <span class="kw">in</span> comparison:</span>
<span id="cb50-591"><a href="#cb50-591" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb50-592"><a href="#cb50-592" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> match[key] <span class="op">!=</span> comparison[key]:</span>
<span id="cb50-593"><a href="#cb50-593" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb50-594"><a href="#cb50-594" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-595"><a href="#cb50-595" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(sue)</span>
<span id="cb50-596"><a href="#cb50-596" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb50-597"><a href="#cb50-597" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-598"><a href="#cb50-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-599"><a href="#cb50-599" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-600"><a href="#cb50-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-603"><a href="#cb50-603" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-604"><a href="#cb50-604" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sue <span class="kw">in</span> sues:</span>
<span id="cb50-605"><a href="#cb50-605" aria-hidden="true" tabindex="-1"></a>    comparison <span class="op">=</span> sues[sue]</span>
<span id="cb50-606"><a href="#cb50-606" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> match:</span>
<span id="cb50-607"><a href="#cb50-607" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">not</span> <span class="kw">in</span> comparison:</span>
<span id="cb50-608"><a href="#cb50-608" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb50-609"><a href="#cb50-609" aria-hidden="true" tabindex="-1"></a>        f <span class="op">=</span> <span class="kw">lambda</span> known, measured: known <span class="op">==</span> measured</span>
<span id="cb50-610"><a href="#cb50-610" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">in</span> [<span class="st">"cats"</span>, <span class="st">"trees"</span>]:</span>
<span id="cb50-611"><a href="#cb50-611" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> <span class="kw">lambda</span> known, measured: measured <span class="op">&gt;</span> known</span>
<span id="cb50-612"><a href="#cb50-612" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> key <span class="kw">in</span> [<span class="st">"pomeranians"</span>, <span class="st">"goldfish"</span>]:</span>
<span id="cb50-613"><a href="#cb50-613" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> <span class="kw">lambda</span> known, measured: measured <span class="op">&lt;</span> known</span>
<span id="cb50-614"><a href="#cb50-614" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> f(match[key], comparison[key]):</span>
<span id="cb50-615"><a href="#cb50-615" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb50-616"><a href="#cb50-616" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-617"><a href="#cb50-617" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(sue)</span>
<span id="cb50-618"><a href="#cb50-618" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb50-619"><a href="#cb50-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-620"><a href="#cb50-620" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-621"><a href="#cb50-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-622"><a href="#cb50-622" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 17: No Such Thing as Too Much](https://adventofcode.com/2015/day/17)</span></span>
<span id="cb50-623"><a href="#cb50-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-624"><a href="#cb50-624" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-625"><a href="#cb50-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-628"><a href="#cb50-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-629"><a href="#cb50-629" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> count(value, containers):</span>
<span id="cb50-630"><a href="#cb50-630" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> value <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb50-631"><a href="#cb50-631" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb50-632"><a href="#cb50-632" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> value <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">or</span> <span class="bu">len</span>(containers) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb50-633"><a href="#cb50-633" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb50-634"><a href="#cb50-634" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count(value <span class="op">-</span> containers[<span class="dv">0</span>], containers[<span class="dv">1</span>:]) <span class="op">+</span> count(value, containers[<span class="dv">1</span>:])</span>
<span id="cb50-635"><a href="#cb50-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-636"><a href="#cb50-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-637"><a href="#cb50-637" aria-hidden="true" tabindex="-1"></a>count(<span class="dv">150</span>, load(<span class="dv">17</span>, <span class="st">"np"</span>))</span>
<span id="cb50-638"><a href="#cb50-638" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-639"><a href="#cb50-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-640"><a href="#cb50-640" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-641"><a href="#cb50-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-644"><a href="#cb50-644" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-645"><a href="#cb50-645" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> count(value, containers):</span>
<span id="cb50-646"><a href="#cb50-646" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb50-647"><a href="#cb50-647" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> inner(value, containers, depth):</span>
<span id="cb50-648"><a href="#cb50-648" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> value <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb50-649"><a href="#cb50-649" aria-hidden="true" tabindex="-1"></a>            result[depth] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb50-650"><a href="#cb50-650" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb50-651"><a href="#cb50-651" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> value <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">or</span> <span class="bu">len</span>(containers) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb50-652"><a href="#cb50-652" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb50-653"><a href="#cb50-653" aria-hidden="true" tabindex="-1"></a>        inner(value <span class="op">-</span> containers[<span class="dv">0</span>], containers[<span class="dv">1</span>:], depth <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb50-654"><a href="#cb50-654" aria-hidden="true" tabindex="-1"></a>        inner(value, containers[<span class="dv">1</span>:], depth)</span>
<span id="cb50-655"><a href="#cb50-655" aria-hidden="true" tabindex="-1"></a>    inner(value, containers, <span class="dv">0</span>)</span>
<span id="cb50-656"><a href="#cb50-656" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb50-657"><a href="#cb50-657" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> count(<span class="dv">150</span>, load(<span class="dv">17</span>, <span class="st">"np"</span>))</span>
<span id="cb50-658"><a href="#cb50-658" aria-hidden="true" tabindex="-1"></a>result[<span class="bu">min</span>(result.keys())]</span>
<span id="cb50-659"><a href="#cb50-659" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-660"><a href="#cb50-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-661"><a href="#cb50-661" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 18: Like a GIF For Your Yard](https://adventofcode.com/2015/day/18)</span></span>
<span id="cb50-662"><a href="#cb50-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-663"><a href="#cb50-663" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-664"><a href="#cb50-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-667"><a href="#cb50-667" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-668"><a href="#cb50-668" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]]</span>
<span id="cb50-669"><a href="#cb50-669" aria-hidden="true" tabindex="-1"></a>initial_board <span class="op">=</span> np.array(</span>
<span id="cb50-670"><a href="#cb50-670" aria-hidden="true" tabindex="-1"></a>    [[<span class="dv">0</span> <span class="cf">if</span> char <span class="op">==</span> <span class="st">"."</span> <span class="cf">else</span> <span class="dv">1</span> <span class="cf">for</span> char <span class="kw">in</span> line] <span class="cf">for</span> line <span class="kw">in</span> load(<span class="dv">18</span>)]</span>
<span id="cb50-671"><a href="#cb50-671" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-672"><a href="#cb50-672" aria-hidden="true" tabindex="-1"></a>board <span class="op">=</span> initial_board.copy()</span>
<span id="cb50-673"><a href="#cb50-673" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb50-674"><a href="#cb50-674" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> scipy.ndimage.convolve(board, weights, mode<span class="op">=</span><span class="st">"constant"</span>)</span>
<span id="cb50-675"><a href="#cb50-675" aria-hidden="true" tabindex="-1"></a>    board <span class="op">=</span> ((mask <span class="op">==</span> <span class="dv">3</span>) <span class="op">|</span> ((mask <span class="op">-</span> board) <span class="op">==</span> <span class="dv">3</span>)).astype(<span class="bu">int</span>)</span>
<span id="cb50-676"><a href="#cb50-676" aria-hidden="true" tabindex="-1"></a>board.<span class="bu">sum</span>()</span>
<span id="cb50-677"><a href="#cb50-677" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-678"><a href="#cb50-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-679"><a href="#cb50-679" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-680"><a href="#cb50-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-683"><a href="#cb50-683" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-684"><a href="#cb50-684" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fix_corners(board):</span>
<span id="cb50-685"><a href="#cb50-685" aria-hidden="true" tabindex="-1"></a>    board <span class="op">=</span> np.roll(board, <span class="dv">1</span>, axis<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb50-686"><a href="#cb50-686" aria-hidden="true" tabindex="-1"></a>    board[:<span class="dv">2</span>, :<span class="dv">2</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb50-687"><a href="#cb50-687" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.roll(board, <span class="op">-</span><span class="dv">1</span>, axis<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb50-688"><a href="#cb50-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-689"><a href="#cb50-689" aria-hidden="true" tabindex="-1"></a>board <span class="op">=</span> fix_corners(initial_board)</span>
<span id="cb50-690"><a href="#cb50-690" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>):</span>
<span id="cb50-691"><a href="#cb50-691" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> scipy.ndimage.convolve(board, weights, mode<span class="op">=</span><span class="st">'constant'</span>)</span>
<span id="cb50-692"><a href="#cb50-692" aria-hidden="true" tabindex="-1"></a>    board <span class="op">=</span> fix_corners(((mask <span class="op">==</span> <span class="dv">3</span>) <span class="op">|</span> ((mask <span class="op">-</span> board) <span class="op">==</span> <span class="dv">3</span>)).astype(<span class="bu">int</span>))</span>
<span id="cb50-693"><a href="#cb50-693" aria-hidden="true" tabindex="-1"></a>board.<span class="bu">sum</span>()</span>
<span id="cb50-694"><a href="#cb50-694" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-695"><a href="#cb50-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-696"><a href="#cb50-696" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 19: Medicine for Rudolph](https://adventofcode.com/2015/day/19)</span></span>
<span id="cb50-697"><a href="#cb50-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-698"><a href="#cb50-698" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-699"><a href="#cb50-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-702"><a href="#cb50-702" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-703"><a href="#cb50-703" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">19</span>)</span>
<span id="cb50-704"><a href="#cb50-704" aria-hidden="true" tabindex="-1"></a>transitions, initial_string <span class="op">=</span> data[:<span class="op">-</span><span class="dv">2</span>], data[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb50-705"><a href="#cb50-705" aria-hidden="true" tabindex="-1"></a>transitions <span class="op">=</span> [x.split(<span class="st">" =&gt; "</span>) <span class="cf">for</span> x <span class="kw">in</span> transitions]</span>
<span id="cb50-706"><a href="#cb50-706" aria-hidden="true" tabindex="-1"></a>transformations <span class="op">=</span> defaultdict(<span class="bu">list</span>)</span>
<span id="cb50-707"><a href="#cb50-707" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> source, dest <span class="kw">in</span> transitions:</span>
<span id="cb50-708"><a href="#cb50-708" aria-hidden="true" tabindex="-1"></a>    transformations[source].append(dest)</span>
<span id="cb50-709"><a href="#cb50-709" aria-hidden="true" tabindex="-1"></a>element_regex <span class="op">=</span> <span class="st">"[A-Z][a-z]?"</span></span>
<span id="cb50-710"><a href="#cb50-710" aria-hidden="true" tabindex="-1"></a>elements <span class="op">=</span> re.findall(element_regex, initial_string)</span>
<span id="cb50-711"><a href="#cb50-711" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb50-712"><a href="#cb50-712" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, element <span class="kw">in</span> <span class="bu">enumerate</span>(elements):</span>
<span id="cb50-713"><a href="#cb50-713" aria-hidden="true" tabindex="-1"></a>    prefix <span class="op">=</span> <span class="st">''</span>.join(elements[:idx])</span>
<span id="cb50-714"><a href="#cb50-714" aria-hidden="true" tabindex="-1"></a>    suffix <span class="op">=</span> <span class="st">''</span>.join(elements[idx<span class="op">+</span><span class="dv">1</span>:])</span>
<span id="cb50-715"><a href="#cb50-715" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> transformation <span class="kw">in</span> transformations[element]:</span>
<span id="cb50-716"><a href="#cb50-716" aria-hidden="true" tabindex="-1"></a>        result.add(prefix <span class="op">+</span> transformation <span class="op">+</span> suffix)</span>
<span id="cb50-717"><a href="#cb50-717" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(result)</span>
<span id="cb50-718"><a href="#cb50-718" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-719"><a href="#cb50-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-720"><a href="#cb50-720" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-721"><a href="#cb50-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-722"><a href="#cb50-722" aria-hidden="true" tabindex="-1"></a>Instead of trying to make the final string starting from "e" and using the given transformations, we can equivalently try to reduce the final string to "e" using the reverse transformations - that should be the same thing.</span>
<span id="cb50-723"><a href="#cb50-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-724"><a href="#cb50-724" aria-hidden="true" tabindex="-1"></a>If we're naive about this, it's going to take a very long time. One thing to notice is that "Ca" only appears on the right hand side of our transformation rules as "X =<span class="sc">\&gt;</span> XCa" or "X =<span class="sc">\&gt;</span> CaX". So generating one unit of "Ca" always takes one step, and we can pretend there's a rule of the form "'∅ =<span class="sc">\&gt;</span> Ca".</span>
<span id="cb50-725"><a href="#cb50-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-726"><a href="#cb50-726" aria-hidden="true" tabindex="-1"></a>That still leaves us with more than 100k candidates for shortening after only 4 reverse substitutions, which is less than ideal. Luckily, there's a pen and paper solution!</span>
<span id="cb50-727"><a href="#cb50-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-728"><a href="#cb50-728" aria-hidden="true" tabindex="-1"></a>Looking further at the list of reactions given, all the ones that don't produce Rn are of the form "A =<span class="sc">\&gt;</span> BC", and thus always take exactly one step to increase the length of the molecule by one.</span>
<span id="cb50-729"><a href="#cb50-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-730"><a href="#cb50-730" aria-hidden="true" tabindex="-1"></a>The only remaining question is how efficiently we can use the Rn we have available. Now, some of the "Rn" reactions give a "C" to start with, but "C" is not the source of any reaction and it's not present in our string, so we can completely ignore these. Looking at the remainder, all the reactions convert one element into four, apart from "H =<span class="sc">\&gt;</span> NRnFYFAr" and "Ca =<span class="sc">\&gt;</span> SiRnFYFAr", which convert one to six. There are only 6 Ys in the initial string, so these reactions have to run exactly six times, and the others run 30 times (There are 36 Rns in my input)</span>
<span id="cb50-731"><a href="#cb50-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-732"><a href="#cb50-732" aria-hidden="true" tabindex="-1"></a>There are 292 elements in the initial string. After getting rid of Rns I have 292 - 5 <span class="sc">\*</span> 6 - 3 <span class="sc">\*</span> 30 = 172 elements left, and have spent 36 reactions. Getting to one electron requires a further 171 reactions for a total of 207.</span>
<span id="cb50-733"><a href="#cb50-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-734"><a href="#cb50-734" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 20: Infinite Elves and Infinite Houses](https://adventofcode.com/2015/day/20)</span></span>
<span id="cb50-735"><a href="#cb50-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-736"><a href="#cb50-736" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-737"><a href="#cb50-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-738"><a href="#cb50-738" aria-hidden="true" tabindex="-1"></a>We're looking for numbers that have lots of divisors compared to how big they are. A bit of ass-pulling lets me guess that they have to be divisible by 60.</span>
<span id="cb50-739"><a href="#cb50-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-742"><a href="#cb50-742" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-743"><a href="#cb50-743" aria-hidden="true" tabindex="-1"></a>target <span class="op">=</span> <span class="dv">33100000</span></span>
<span id="cb50-744"><a href="#cb50-744" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sum_of_factors(n, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb50-745"><a href="#cb50-745" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-746"><a href="#cb50-746" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">int</span>(np.sqrt(n)) <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb50-747"><a href="#cb50-747" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb50-748"><a href="#cb50-748" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> part <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb50-749"><a href="#cb50-749" aria-hidden="true" tabindex="-1"></a>                result <span class="op">+=</span> i <span class="op">+</span> <span class="bu">int</span>(n <span class="op">//</span> i)</span>
<span id="cb50-750"><a href="#cb50-750" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb50-751"><a href="#cb50-751" aria-hidden="true" tabindex="-1"></a>                div <span class="op">=</span> n <span class="op">//</span> i</span>
<span id="cb50-752"><a href="#cb50-752" aria-hidden="true" tabindex="-1"></a>                result <span class="op">+=</span> (i <span class="cf">if</span> div <span class="op">&lt;=</span> <span class="dv">50</span> <span class="cf">else</span> <span class="dv">0</span>) <span class="op">+</span> (div <span class="cf">if</span> i <span class="op">&lt;=</span> <span class="dv">50</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb50-753"><a href="#cb50-753" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb50-754"><a href="#cb50-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-755"><a href="#cb50-755" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(target, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb50-756"><a href="#cb50-756" aria-hidden="true" tabindex="-1"></a>    i, total <span class="op">=</span> <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb50-757"><a href="#cb50-757" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> total <span class="op">&lt;</span> target:</span>
<span id="cb50-758"><a href="#cb50-758" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">60</span></span>
<span id="cb50-759"><a href="#cb50-759" aria-hidden="true" tabindex="-1"></a>        total <span class="op">=</span> sum_of_factors(i, part)</span>
<span id="cb50-760"><a href="#cb50-760" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb50-761"><a href="#cb50-761" aria-hidden="true" tabindex="-1"></a>run(target <span class="op">/</span> <span class="dv">10</span>)</span>
<span id="cb50-762"><a href="#cb50-762" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-763"><a href="#cb50-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-764"><a href="#cb50-764" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-765"><a href="#cb50-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-766"><a href="#cb50-766" aria-hidden="true" tabindex="-1"></a>The only things that change for part 2 are the target, and the calculation of the sum of factors. That's most easily done by passing a "part" flag to the sum of factors function, and a "target" parameter to run. Of course, that makes the following look fairly boring:</span>
<span id="cb50-767"><a href="#cb50-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-770"><a href="#cb50-770" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-771"><a href="#cb50-771" aria-hidden="true" tabindex="-1"></a>run(target <span class="op">/</span> <span class="dv">11</span>, <span class="dv">2</span>)</span>
<span id="cb50-772"><a href="#cb50-772" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-773"><a href="#cb50-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-774"><a href="#cb50-774" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 21: RPG Simulator 20XX](https://adventofcode.com/2015/day/21)</span></span>
<span id="cb50-775"><a href="#cb50-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-776"><a href="#cb50-776" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-777"><a href="#cb50-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-780"><a href="#cb50-780" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-781"><a href="#cb50-781" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {k: <span class="bu">int</span>(v) <span class="cf">for</span> k, v <span class="kw">in</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x.split(<span class="st">":"</span>), load(<span class="dv">20</span>))}</span>
<span id="cb50-782"><a href="#cb50-782" aria-hidden="true" tabindex="-1"></a>turns <span class="op">=</span> [(armor, np.ceil(<span class="dv">100</span> <span class="op">/</span> (data[<span class="st">"Damage"</span>] <span class="op">-</span> armor)) <span class="op">-</span> <span class="dv">1</span>) <span class="cf">for</span> armor <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">8</span>)]</span>
<span id="cb50-783"><a href="#cb50-783" aria-hidden="true" tabindex="-1"></a>attack_needed <span class="op">=</span> [</span>
<span id="cb50-784"><a href="#cb50-784" aria-hidden="true" tabindex="-1"></a>    np.ceil(data[<span class="st">"Hit Points"</span>] <span class="op">/</span> (x[<span class="dv">1</span>] <span class="op">+</span> <span class="dv">1</span>)) <span class="op">+</span> data[<span class="st">"Armor"</span>] <span class="cf">for</span> x <span class="kw">in</span> turns</span>
<span id="cb50-785"><a href="#cb50-785" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb50-786"><a href="#cb50-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-787"><a href="#cb50-787" aria-hidden="true" tabindex="-1"></a>equipment <span class="op">=</span> load(<span class="st">"20_auxiliary"</span>, <span class="st">"int"</span>)</span>
<span id="cb50-788"><a href="#cb50-788" aria-hidden="true" tabindex="-1"></a>equipment <span class="op">=</span> equipment[:<span class="dv">10</span>] <span class="op">+</span> [x[<span class="dv">1</span>:] <span class="cf">for</span> x <span class="kw">in</span> equipment[<span class="dv">10</span>:]]</span>
<span id="cb50-789"><a href="#cb50-789" aria-hidden="true" tabindex="-1"></a>weapons <span class="op">=</span> equipment[:<span class="dv">5</span>]</span>
<span id="cb50-790"><a href="#cb50-790" aria-hidden="true" tabindex="-1"></a>armor <span class="op">=</span> equipment[<span class="dv">5</span>:<span class="dv">10</span>]</span>
<span id="cb50-791"><a href="#cb50-791" aria-hidden="true" tabindex="-1"></a>rings <span class="op">=</span> equipment[<span class="dv">10</span>:]</span>
<span id="cb50-792"><a href="#cb50-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-793"><a href="#cb50-793" aria-hidden="true" tabindex="-1"></a><span class="co"># Use itertools to select one weapon, at most one armor and at most two rings</span></span>
<span id="cb50-794"><a href="#cb50-794" aria-hidden="true" tabindex="-1"></a>options <span class="op">=</span> itertools.product(</span>
<span id="cb50-795"><a href="#cb50-795" aria-hidden="true" tabindex="-1"></a>    weapons,</span>
<span id="cb50-796"><a href="#cb50-796" aria-hidden="true" tabindex="-1"></a>    itertools.chain([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]], armor),</span>
<span id="cb50-797"><a href="#cb50-797" aria-hidden="true" tabindex="-1"></a>    itertools.chain([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]], rings, itertools.combinations(rings, <span class="dv">2</span>)),</span>
<span id="cb50-798"><a href="#cb50-798" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-799"><a href="#cb50-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-800"><a href="#cb50-800" aria-hidden="true" tabindex="-1"></a><span class="co"># The two ring case has to be flattened</span></span>
<span id="cb50-801"><a href="#cb50-801" aria-hidden="true" tabindex="-1"></a>options <span class="op">=</span> [</span>
<span id="cb50-802"><a href="#cb50-802" aria-hidden="true" tabindex="-1"></a>    <span class="bu">list</span>(option[:<span class="op">-</span><span class="dv">1</span>]) <span class="op">+</span> <span class="bu">list</span>(option[<span class="op">-</span><span class="dv">1</span>]) <span class="cf">if</span> <span class="bu">isinstance</span>(option[<span class="op">-</span><span class="dv">1</span>], <span class="bu">tuple</span>) <span class="cf">else</span> option</span>
<span id="cb50-803"><a href="#cb50-803" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> option <span class="kw">in</span> options</span>
<span id="cb50-804"><a href="#cb50-804" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb50-805"><a href="#cb50-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-806"><a href="#cb50-806" aria-hidden="true" tabindex="-1"></a><span class="co"># Then we have regular data and can just convert to a numpy array and sum</span></span>
<span id="cb50-807"><a href="#cb50-807" aria-hidden="true" tabindex="-1"></a>sums <span class="op">=</span> [np.array(option, dtype<span class="op">=</span><span class="bu">int</span>).<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>) <span class="cf">for</span> option <span class="kw">in</span> options]</span>
<span id="cb50-808"><a href="#cb50-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-809"><a href="#cb50-809" aria-hidden="true" tabindex="-1"></a><span class="co"># We need the smallest gold value that has enough (damage, armor)</span></span>
<span id="cb50-810"><a href="#cb50-810" aria-hidden="true" tabindex="-1"></a><span class="bu">min</span>(s[<span class="dv">0</span>] <span class="cf">for</span> s <span class="kw">in</span> sums <span class="cf">if</span> s[<span class="dv">1</span>] <span class="op">&gt;=</span> attack_needed[<span class="bu">min</span>(s[<span class="dv">2</span>], <span class="dv">7</span>)])</span>
<span id="cb50-811"><a href="#cb50-811" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-812"><a href="#cb50-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-813"><a href="#cb50-813" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-814"><a href="#cb50-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-815"><a href="#cb50-815" aria-hidden="true" tabindex="-1"></a>With all that in place, part 2 is just inverting an inequality and changing a min to a max:</span>
<span id="cb50-816"><a href="#cb50-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-819"><a href="#cb50-819" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-820"><a href="#cb50-820" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(s[<span class="dv">0</span>] <span class="cf">for</span> s <span class="kw">in</span> sums <span class="cf">if</span> s[<span class="dv">1</span>] <span class="op">&lt;</span> attack_needed[<span class="bu">min</span>(s[<span class="dv">2</span>], <span class="dv">7</span>)])</span>
<span id="cb50-821"><a href="#cb50-821" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-822"><a href="#cb50-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-823"><a href="#cb50-823" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 22: Wizard Simulator 20XX](https://adventofcode.com/2015/day/22)</span></span>
<span id="cb50-824"><a href="#cb50-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-825"><a href="#cb50-825" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-826"><a href="#cb50-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-829"><a href="#cb50-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-830"><a href="#cb50-830" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> queue</span>
<span id="cb50-831"><a href="#cb50-831" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_effects(effects):</span>
<span id="cb50-832"><a href="#cb50-832" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">tuple</span>([<span class="bu">max</span>(x <span class="op">-</span> <span class="dv">2</span>, <span class="dv">0</span>) <span class="cf">for</span> x <span class="kw">in</span> effects])</span>
<span id="cb50-833"><a href="#cb50-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-834"><a href="#cb50-834" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> apply_effects(state, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb50-835"><a href="#cb50-835" aria-hidden="true" tabindex="-1"></a>    own_hp, boss_hp, mana, shield, poison, recharge <span class="op">=</span> state</span>
<span id="cb50-836"><a href="#cb50-836" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (own_hp <span class="op">-</span> (<span class="dv">2</span> <span class="cf">if</span> shield <span class="cf">else</span> <span class="dv">9</span>) <span class="op">-</span> (<span class="dv">1</span> <span class="cf">if</span> part <span class="op">==</span> <span class="dv">2</span> <span class="cf">else</span> <span class="dv">0</span>),</span>
<span id="cb50-837"><a href="#cb50-837" aria-hidden="true" tabindex="-1"></a>            boss_hp <span class="op">-</span> (<span class="dv">6</span> <span class="cf">if</span> poison <span class="cf">else</span> <span class="dv">0</span>),</span>
<span id="cb50-838"><a href="#cb50-838" aria-hidden="true" tabindex="-1"></a>            mana <span class="op">+</span> (<span class="dv">202</span> <span class="cf">if</span> recharge <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">else</span> <span class="dv">101</span> <span class="cf">if</span> recharge <span class="cf">else</span> <span class="dv">0</span>))</span>
<span id="cb50-839"><a href="#cb50-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-840"><a href="#cb50-840" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> neighbors(state, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb50-841"><a href="#cb50-841" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> state[<span class="dv">0</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb50-842"><a href="#cb50-842" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb50-843"><a href="#cb50-843" aria-hidden="true" tabindex="-1"></a>    new_hp, new_boss_hp, new_mana <span class="op">=</span> apply_effects(state, part<span class="op">=</span>part)</span>
<span id="cb50-844"><a href="#cb50-844" aria-hidden="true" tabindex="-1"></a>    new_effects <span class="op">=</span> update_effects(state[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb50-845"><a href="#cb50-845" aria-hidden="true" tabindex="-1"></a>    neighbors <span class="op">=</span> [(<span class="dv">53</span>, (new_hp, new_boss_hp <span class="op">-</span> <span class="dv">4</span>, new_mana <span class="op">-</span> <span class="dv">53</span>) <span class="op">+</span> new_effects),</span>
<span id="cb50-846"><a href="#cb50-846" aria-hidden="true" tabindex="-1"></a>                 (<span class="dv">73</span>, (new_hp <span class="op">+</span> <span class="dv">2</span>, new_boss_hp <span class="op">-</span> <span class="dv">2</span>, new_mana <span class="op">-</span> <span class="dv">73</span>) <span class="op">+</span> new_effects)]</span>
<span id="cb50-847"><a href="#cb50-847" aria-hidden="true" tabindex="-1"></a>    costs <span class="op">=</span> [<span class="dv">113</span>, <span class="dv">173</span>, <span class="dv">229</span>]</span>
<span id="cb50-848"><a href="#cb50-848" aria-hidden="true" tabindex="-1"></a>    durations <span class="op">=</span> [<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">5</span>]</span>
<span id="cb50-849"><a href="#cb50-849" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (cost, duration) <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">zip</span>(costs, durations)):</span>
<span id="cb50-850"><a href="#cb50-850" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> state[<span class="dv">2</span>] <span class="op">&lt;</span> cost <span class="kw">or</span> new_effects[idx] <span class="op">!=</span> <span class="dv">0</span>:</span>
<span id="cb50-851"><a href="#cb50-851" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb50-852"><a href="#cb50-852" aria-hidden="true" tabindex="-1"></a>        new_state <span class="op">=</span> <span class="bu">list</span>(state).copy()</span>
<span id="cb50-853"><a href="#cb50-853" aria-hidden="true" tabindex="-1"></a>        new_state[idx <span class="op">+</span> <span class="dv">3</span>] <span class="op">=</span> duration</span>
<span id="cb50-854"><a href="#cb50-854" aria-hidden="true" tabindex="-1"></a>        new_hp, new_boss_hp, new_mana <span class="op">=</span> apply_effects(new_state, part<span class="op">=</span>part)</span>
<span id="cb50-855"><a href="#cb50-855" aria-hidden="true" tabindex="-1"></a>        new_effects <span class="op">=</span> update_effects(new_state[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb50-856"><a href="#cb50-856" aria-hidden="true" tabindex="-1"></a>        neighbors.append((cost, (new_hp, new_boss_hp, new_mana <span class="op">-</span> cost) <span class="op">+</span> new_effects))</span>
<span id="cb50-857"><a href="#cb50-857" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [neighbor <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors <span class="cf">if</span> neighbor[<span class="dv">1</span>][<span class="dv">2</span>] <span class="op">&gt;=</span> <span class="dv">0</span>]</span>
<span id="cb50-858"><a href="#cb50-858" aria-hidden="true" tabindex="-1"></a>initial_state <span class="op">=</span> (<span class="dv">50</span>, <span class="dv">58</span>, <span class="dv">500</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb50-859"><a href="#cb50-859" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> PriorityQueue()</span>
<span id="cb50-860"><a href="#cb50-860" aria-hidden="true" tabindex="-1"></a>q.put((<span class="dv">0</span>, initial_state))</span>
<span id="cb50-861"><a href="#cb50-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-862"><a href="#cb50-862" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> q.qsize() <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb50-863"><a href="#cb50-863" aria-hidden="true" tabindex="-1"></a>    cost, state <span class="op">=</span> q.get()</span>
<span id="cb50-864"><a href="#cb50-864" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> state[<span class="dv">1</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb50-865"><a href="#cb50-865" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb50-866"><a href="#cb50-866" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors(state):</span>
<span id="cb50-867"><a href="#cb50-867" aria-hidden="true" tabindex="-1"></a>        extra_cost, new_state <span class="op">=</span> neighbor</span>
<span id="cb50-868"><a href="#cb50-868" aria-hidden="true" tabindex="-1"></a>        q.put((cost <span class="op">+</span> extra_cost, new_state))</span>
<span id="cb50-869"><a href="#cb50-869" aria-hidden="true" tabindex="-1"></a>cost</span>
<span id="cb50-870"><a href="#cb50-870" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-871"><a href="#cb50-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-872"><a href="#cb50-872" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-873"><a href="#cb50-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-876"><a href="#cb50-876" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-877"><a href="#cb50-877" aria-hidden="true" tabindex="-1"></a>initial_state <span class="op">=</span> (<span class="dv">49</span>, <span class="dv">58</span>, <span class="dv">500</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb50-878"><a href="#cb50-878" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> PriorityQueue()</span>
<span id="cb50-879"><a href="#cb50-879" aria-hidden="true" tabindex="-1"></a>q.put((<span class="dv">0</span>, initial_state))</span>
<span id="cb50-880"><a href="#cb50-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-881"><a href="#cb50-881" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> q.qsize() <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb50-882"><a href="#cb50-882" aria-hidden="true" tabindex="-1"></a>    cost, state <span class="op">=</span> q.get()</span>
<span id="cb50-883"><a href="#cb50-883" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> state[<span class="dv">1</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb50-884"><a href="#cb50-884" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb50-885"><a href="#cb50-885" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors(state, part<span class="op">=</span><span class="dv">2</span>):</span>
<span id="cb50-886"><a href="#cb50-886" aria-hidden="true" tabindex="-1"></a>        extra_cost, new_state <span class="op">=</span> neighbor</span>
<span id="cb50-887"><a href="#cb50-887" aria-hidden="true" tabindex="-1"></a>        q.put((cost <span class="op">+</span> extra_cost, new_state))</span>
<span id="cb50-888"><a href="#cb50-888" aria-hidden="true" tabindex="-1"></a>cost</span>
<span id="cb50-889"><a href="#cb50-889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-890"><a href="#cb50-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-891"><a href="#cb50-891" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 23: Opening the Turing Lock](https://adventofcode.com/2015/day/23)</span></span>
<span id="cb50-892"><a href="#cb50-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-893"><a href="#cb50-893" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-894"><a href="#cb50-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-897"><a href="#cb50-897" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-898"><a href="#cb50-898" aria-hidden="true" tabindex="-1"></a>arithmetics <span class="op">=</span> {</span>
<span id="cb50-899"><a href="#cb50-899" aria-hidden="true" tabindex="-1"></a>    <span class="st">"inc"</span>: <span class="kw">lambda</span> x: x <span class="op">+</span> <span class="dv">1</span>,</span>
<span id="cb50-900"><a href="#cb50-900" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tpl"</span>: <span class="kw">lambda</span> x: x <span class="op">*</span> <span class="dv">3</span>,</span>
<span id="cb50-901"><a href="#cb50-901" aria-hidden="true" tabindex="-1"></a>    <span class="st">"hlf"</span>: <span class="kw">lambda</span> x: <span class="bu">int</span>(x <span class="op">//</span> <span class="dv">2</span>),</span>
<span id="cb50-902"><a href="#cb50-902" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-903"><a href="#cb50-903" aria-hidden="true" tabindex="-1"></a>jumps <span class="op">=</span> {<span class="st">"jmp"</span>: <span class="kw">lambda</span> x: <span class="va">True</span>, <span class="st">"jie"</span>: <span class="kw">lambda</span> x: (x <span class="op">%</span> <span class="dv">2</span>) <span class="op">==</span> <span class="dv">0</span>, <span class="st">"jio"</span>: <span class="kw">lambda</span> x: x <span class="op">==</span> <span class="dv">1</span>}</span>
<span id="cb50-904"><a href="#cb50-904" aria-hidden="true" tabindex="-1"></a>known_tokens <span class="op">=</span> <span class="bu">list</span>(arithmetics.keys()) <span class="op">+</span> <span class="bu">list</span>(jumps.keys()) <span class="op">+</span> [<span class="st">"a"</span>, <span class="st">"b"</span>]</span>
<span id="cb50-905"><a href="#cb50-905" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [line.replace(<span class="st">","</span>, <span class="st">""</span>).split() <span class="cf">for</span> line <span class="kw">in</span> load(<span class="dv">23</span>)]</span>
<span id="cb50-906"><a href="#cb50-906" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [</span>
<span id="cb50-907"><a href="#cb50-907" aria-hidden="true" tabindex="-1"></a>    [token <span class="cf">if</span> token <span class="kw">in</span> known_tokens <span class="cf">else</span> <span class="bu">int</span>(token) <span class="cf">for</span> token <span class="kw">in</span> line] <span class="cf">for</span> line <span class="kw">in</span> data</span>
<span id="cb50-908"><a href="#cb50-908" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb50-909"><a href="#cb50-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-910"><a href="#cb50-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-911"><a href="#cb50-911" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(program, part<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb50-912"><a href="#cb50-912" aria-hidden="true" tabindex="-1"></a>    ip <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb50-913"><a href="#cb50-913" aria-hidden="true" tabindex="-1"></a>    registers <span class="op">=</span> defaultdict(<span class="bu">int</span>)</span>
<span id="cb50-914"><a href="#cb50-914" aria-hidden="true" tabindex="-1"></a>    registers[<span class="st">"a"</span>] <span class="op">=</span> <span class="bu">int</span>(part <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb50-915"><a href="#cb50-915" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> ip <span class="op">&lt;</span> <span class="bu">len</span>(program):</span>
<span id="cb50-916"><a href="#cb50-916" aria-hidden="true" tabindex="-1"></a>        instruction <span class="op">=</span> program[ip]</span>
<span id="cb50-917"><a href="#cb50-917" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> instruction[<span class="dv">0</span>] <span class="kw">in</span> arithmetics:</span>
<span id="cb50-918"><a href="#cb50-918" aria-hidden="true" tabindex="-1"></a>            registers[instruction[<span class="dv">1</span>]] <span class="op">=</span> arithmetics[instruction[<span class="dv">0</span>]](</span>
<span id="cb50-919"><a href="#cb50-919" aria-hidden="true" tabindex="-1"></a>                registers[instruction[<span class="dv">1</span>]]</span>
<span id="cb50-920"><a href="#cb50-920" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb50-921"><a href="#cb50-921" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb50-922"><a href="#cb50-922" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> jumps[instruction[<span class="dv">0</span>]](registers[instruction[<span class="dv">1</span>]]):</span>
<span id="cb50-923"><a href="#cb50-923" aria-hidden="true" tabindex="-1"></a>                ip <span class="op">+=</span> instruction[<span class="op">-</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb50-924"><a href="#cb50-924" aria-hidden="true" tabindex="-1"></a>        ip <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb50-925"><a href="#cb50-925" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> registers</span>
<span id="cb50-926"><a href="#cb50-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-927"><a href="#cb50-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-928"><a href="#cb50-928" aria-hidden="true" tabindex="-1"></a>run(data)[<span class="st">"b"</span>]</span>
<span id="cb50-929"><a href="#cb50-929" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-930"><a href="#cb50-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-931"><a href="#cb50-931" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-932"><a href="#cb50-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-933"><a href="#cb50-933" aria-hidden="true" tabindex="-1"></a>A flag in the "run" function lets us change the relevant register for part 2</span>
<span id="cb50-934"><a href="#cb50-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-937"><a href="#cb50-937" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-938"><a href="#cb50-938" aria-hidden="true" tabindex="-1"></a>run(data, <span class="dv">2</span>)[<span class="st">"b"</span>]</span>
<span id="cb50-939"><a href="#cb50-939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-940"><a href="#cb50-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-941"><a href="#cb50-941" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 24: It Hangs in the Balance](https://adventofcode.com/2015/day/24)</span></span>
<span id="cb50-942"><a href="#cb50-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-943"><a href="#cb50-943" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-944"><a href="#cb50-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-945"><a href="#cb50-945" aria-hidden="true" tabindex="-1"></a>Here's a buggy implementation of part 1. It only looks at the smallest sets that can make the first compartment and completely ignores the others. For the first part that's semi justifiable, since the amount of small numbers in the input make it very likely that the leftover set can be partitioned into two.</span>
<span id="cb50-946"><a href="#cb50-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-949"><a href="#cb50-949" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-950"><a href="#cb50-950" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load(<span class="dv">24</span>, <span class="st">"np"</span>)</span>
<span id="cb50-951"><a href="#cb50-951" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(splits <span class="op">=</span> <span class="dv">3</span>):</span>
<span id="cb50-952"><a href="#cb50-952" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> data.<span class="bu">sum</span>() <span class="op">/</span> splits</span>
<span id="cb50-953"><a href="#cb50-953" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb50-954"><a href="#cb50-954" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb50-955"><a href="#cb50-955" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> combination <span class="kw">in</span> itertools.combinations(data[::<span class="op">-</span><span class="dv">1</span>], i):</span>
<span id="cb50-956"><a href="#cb50-956" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">sum</span>(combination) <span class="op">==</span> target:</span>
<span id="cb50-957"><a href="#cb50-957" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb50-958"><a href="#cb50-958" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb50-959"><a href="#cb50-959" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb50-960"><a href="#cb50-960" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb50-961"><a href="#cb50-961" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb50-962"><a href="#cb50-962" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">min</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: np.product(x),</span>
<span id="cb50-963"><a href="#cb50-963" aria-hidden="true" tabindex="-1"></a>                   <span class="bu">filter</span>(<span class="kw">lambda</span> x: <span class="bu">sum</span>(x) <span class="op">==</span> target,</span>
<span id="cb50-964"><a href="#cb50-964" aria-hidden="true" tabindex="-1"></a>                          itertools.combinations(data[::<span class="op">-</span><span class="dv">1</span>], i))))</span>
<span id="cb50-965"><a href="#cb50-965" aria-hidden="true" tabindex="-1"></a>run()</span>
<span id="cb50-966"><a href="#cb50-966" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-967"><a href="#cb50-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-968"><a href="#cb50-968" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2</span></span>
<span id="cb50-969"><a href="#cb50-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-970"><a href="#cb50-970" aria-hidden="true" tabindex="-1"></a>For the second part, the same cheat works, but is less justifiable, since I don't actually check that the remaining set can be partitioned into three.</span>
<span id="cb50-971"><a href="#cb50-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-974"><a href="#cb50-974" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-975"><a href="#cb50-975" aria-hidden="true" tabindex="-1"></a>run(<span class="dv">4</span>)</span>
<span id="cb50-976"><a href="#cb50-976" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb50-977"><a href="#cb50-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-978"><a href="#cb50-978" aria-hidden="true" tabindex="-1"></a><span class="fu"># [Day 25: Let It Snow](https://adventofcode.com/2015/day/25)</span></span>
<span id="cb50-979"><a href="#cb50-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-980"><a href="#cb50-980" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1</span></span>
<span id="cb50-981"><a href="#cb50-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-984"><a href="#cb50-984" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb50-985"><a href="#cb50-985" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> coordinates_to_n(row, column):</span>
<span id="cb50-986"><a href="#cb50-986" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> row <span class="op">+</span> column</span>
<span id="cb50-987"><a href="#cb50-987" aria-hidden="true" tabindex="-1"></a>    complete_triangles <span class="op">=</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb50-988"><a href="#cb50-988" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">int</span>(complete_triangles) <span class="op">+</span> column</span>
<span id="cb50-989"><a href="#cb50-989" aria-hidden="true" tabindex="-1"></a>row, column <span class="op">=</span> <span class="dv">3010</span>, <span class="dv">3019</span></span>
<span id="cb50-990"><a href="#cb50-990" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> coordinates_to_n(row, column)</span>
<span id="cb50-991"><a href="#cb50-991" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="dv">20151125</span></span>
<span id="cb50-992"><a href="#cb50-992" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb50-993"><a href="#cb50-993" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> (s <span class="op">*</span> (<span class="dv">252533</span>)) <span class="op">%</span> <span class="dv">33554393</span></span>
<span id="cb50-994"><a href="#cb50-994" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb50-995"><a href="#cb50-995" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../index.html">Front page</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/cutonbuminband/AOC">Github</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>